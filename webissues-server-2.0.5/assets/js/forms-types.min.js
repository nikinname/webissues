/*!
 * WebIssues v2.0.5
 * Copyright (C) 2007-2020 WebIssues Team
 * License: Affero GPL v3.0
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{124:function(t,e,i){"use strict";i.r(e);var r=i(85),s={props:{typeId:Number,attributeId:Number,name:String,used:Boolean},data(){return{force:this.used}},methods:{submit(){this.$form.block();const t={attributeId:this.attributeId,force:this.force};this.$ajax.post("/types/attributes/delete.php",t).then(()=>{this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.CannotDeleteAttribute?(this.$form.unblock(),this.force=!0):this.$form.error(t)})},returnToDetails(){this.$router.push("TypeDetails",{typeId:this.typeId})}}},a=i(84),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.DeleteAttribute"),size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.DeleteAttribute"}},[e("strong",[t._v(t._s(t.name))])]),t._v(" "),t.force?e("Prompt",{attrs:{path:"prompt.WarningDeleteAttribute","alert-class":"alert-danger"}},[e("strong",[t._v(t._s(t.$t("label.Warning")))])]):t._e()],1)}),[],!1,null,null,null);e.default=l.exports},125:function(t,e,i){"use strict";i.r(e);var r=i(85),s={props:{typeId:Number,name:String,used:Boolean},data(){return{force:this.used}},methods:{submit(){this.$form.block();const t={typeId:this.typeId,force:this.force};this.$ajax.post("/types/delete.php",t).then(()=>{this.$store.commit("global/setDirty"),this.$router.push("ManageTypes")}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.CannotDeleteType?(this.$form.unblock(),this.force=!0):this.$form.error(t)})},cancel(){this.returnToDetails()},returnToDetails(){this.$router.push("TypeDetails",{typeId:this.typeId})}}},a=i(84),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.DeleteType"),size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.DeleteType"}},[e("strong",[t._v(t._s(t.name))])]),t._v(" "),t.force?e("Prompt",{attrs:{path:"prompt.WarningDeleteType","alert-class":"alert-danger"}},[e("strong",[t._v(t._s(t.$t("label.Warning")))])]):t._e()],1)}),[],!1,null,null,null);e.default=l.exports},126:function(t,e,i){"use strict";i.r(e);var r={props:{typeId:Number,viewId:Number,isPublic:Boolean,name:String},computed:{promptPath(){return this.isPublic?"prompt.DeletePublicView":"prompt.DeletePersonalView"}},methods:{submit(){this.$form.block();const t={viewId:this.viewId};this.$ajax.post("/types/views/delete.php",t).then(()=>{this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{this.$form.error(t)})},returnToDetails(){this.$router.push("ViewSettings",{typeId:this.typeId})}}},s=i(84),a=Object(s.a)(r,(function(){var t=this._self._c;return t("BaseForm",{attrs:{title:this.$t("cmd.DeleteView"),size:"small","with-buttons":""},on:{ok:this.submit,cancel:this.returnToDetails}},[t("Prompt",{attrs:{path:this.promptPath}},[t("strong",[this._v(this._s(this.name))])])],1)}),[],!1,null,null,null);e.default=a.exports},127:function(t,e,i){"use strict";i.r(e);var r=i(85),s=i(87);function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o={props:{mode:String,typeId:Number,initialName:String,attributeId:Number,typeName:String,initialType:String,initialDetails:Object},fields(){const t="edit"==this.mode?this.initialDetails:{decimal:0},e={name:{value:this.initialName,type:String,required:!0,maxLength:r.m.Name},attributeType:{value:this.initialType||"TEXT",type:String,required:!0},multiLine:{value:t["multi-line"],type:Boolean},minLength:{value:t["min-length"],type:String,maxLength:3,condition:()=>this.hasMinMaxLength,parse:this.parseMinLength},maxLength:{value:t["max-length"],type:String,maxLength:3,condition:()=>this.hasMinMaxLength,parse:this.parseMaxLength},editable:{value:t.editable,type:Boolean},multiSelect:{value:t["multi-select"],type:Boolean},items:{type:String,multiLine:!0,required:!0,condition:()=>"ENUM"==this.attributeType,parse:this.parseItems},decimal:{value:t.decimal||0,type:Number,required:!0,condition:()=>"NUMERIC"==this.attributeType},minValue:{type:String,condition:()=>"NUMERIC"==this.attributeType,parse:this.parseMinValue},maxValue:{type:String,condition:()=>"NUMERIC"==this.attributeType,parse:this.parseMaxValue},strip:{value:t.strip,type:Boolean},time:{value:t.time,type:Boolean},local:{value:t.local,type:Boolean},members:{value:t.members,type:Boolean},required:{value:t.required,type:Boolean},defaultValue:{type:String,maxLength:r.m.Value,parse:this.parseDefaultValue}};return null!=t.items&&(e.items.value=t.items.join("\n")),null!=t["min-value"]&&(e.minValue.value=this.$formatter.convertAttributeValue(t["min-value"],{type:"NUMERIC",decimal:t.decimal,strip:t.strip})),null!=t["max-value"]&&(e.maxValue.value=this.$formatter.convertAttributeValue(t["max-value"],{type:"NUMERIC",decimal:t.decimal,strip:t.strip})),null!=t.default&&(e.defaultValue.value=this.$formatter.formatExpression(t.default,l({type:this.initialType},t))),e},data(){const t={extractedItems:[],parsedItems:[]};return null!=this.initialDetails&&null!=this.initialDetails.items&&(t.extractedItems=this.initialDetails.items),t},computed:{title(){return"edit"==this.mode?this.$t("cmd.ModifyAttribute"):"add"==this.mode?this.$t("cmd.AddAttribute"):void 0},attributeTypes(){return"TEXT"==this.initialType||"ENUM"==this.initialType||"USER"==this.initialType?["TEXT","ENUM","USER"]:null!=this.initialType?[this.initialType]:["TEXT","ENUM","NUMERIC","DATETIME","USER"]},attibuteTypeNames(){return this.attributeTypes.map(t=>this.$t("AttributeType."+t))},hasMinMaxLength(){return"TEXT"==this.attributeType||"ENUM"==this.attributeType&&this.editable&&!this.multiSelect},decimalItems:()=>Array(7).fill(0).map((t,e)=>e),decimalNames(){return this.decimalItems.map(t=>t.toString())},attribute(){return{type:this.attributeType,items:this.extractedItems,"multi-select":this.multiSelect?1:0,time:this.time?1:0}}},watch:{attributeType(){this.$fields.clear()}},methods:{submit(){if(!this.$fields.validate())return;if("edit"==this.mode&&!this.$fields.modified())return void this.returnToDetails(this.typeId);const t={};"add"==this.mode?t.typeId=this.typeId:t.attributeId=this.attributeId,t.name=this.name,t.type=this.attributeType;const e=this.extractDetails();if(this.required&&(e.required=1),""!=this.defaultValue){const t=l({type:this.attributeType},e);e.default=this.$parser.convertExpression(this.defaultValue,t)}t.details=e,this.$form.block(),this.$ajax.post("/types/attributes/"+this.mode+".php",t).then(t=>{let{attributeId:e,changed:i}=t;i&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.AttributeAlreadyExists?(this.$form.unblock(),this.nameError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.name.focus()})):this.$form.error(t)})},parseMinLength(t){return""!=t?this.$parser.parseInteger(t,1,r.m.Value).toString():""},parseMaxLength(t){if(""!=t){const e=""!=this.minLength&&null==this.minLengthError?Number(this.minLength):1;return this.$parser.parseInteger(t,e,r.m.Value).toString()}return""},parseItems(t){const e=t.split("\n"),i=[],a=this.hasMinMaxLength&&""!=this.minLength&&null==this.minLengthError?Number(this.minLength):1,l=this.hasMinMaxLength&&""!=this.maxLength&&null==this.maxLengthError?Number(this.maxLength):r.m.Value;for(let t in e){const n=this.$parser.normalizeString(e[t],l,{allowEmpty:!0});if(""!=n){if(n.length<a)throw Object(s.a)(r.g.StringTooShort);if(i.indexOf(n)>=0)throw Object(s.a)(r.g.DuplicateItems);i.push(n)}}return this.parsedItems=i,i.join("\n")},parseMinValue(t){return""!=t?this.$parser.normalizeAttributeValue(t,{type:"NUMERIC",decimal:this.decimal,strip:this.strip?1:0}):""},parseMaxValue(t){if(""!=t){const e=null==this.minValueError?this.$parser.convertAttributeValue(this.minValue,{type:"NUMERIC",decimal:this.decimal}):null;return this.$parser.normalizeAttributeValue(t,{type:"NUMERIC",decimal:this.decimal,"min-value":e,strip:this.strip?1:0})}return""},parseDefaultValue(t){if(""==t)return t;const e=this.extractDetails();"TEXT"==this.attributeType?e["multi-line"]=0:"ENUM"==this.attributeType&&null==e.items&&(e.editable=1);const i=l({type:this.attributeType},e);return this.$parser.normalizeExpression(t,i)},extractDetails(){const t={};switch(this.attributeType){case"TEXT":this.multiLine&&(t["multi-line"]=1),""!=this.minLength&&null==this.minLengthError&&(t["min-length"]=Number(this.minLength)),""!=this.maxLength&&null==this.maxLengthError&&(t["max-length"]=Number(this.maxLength));break;case"ENUM":this.editable&&(t.editable=1),this.multiSelect&&(t["multi-select"]=1),null==this.itemsError&&(t.items=this.parsedItems),this.hasMinMaxLength&&(""!=this.minLength&&null==this.minLengthError&&(t["min-length"]=Number(this.minLength)),""!=this.maxLength&&null==this.maxLengthError&&(t["max-length"]=Number(this.maxLength)));break;case"NUMERIC":t.decimal=this.decimal,""!=this.minValue&&null==this.minValueError&&(t["min-value"]=this.$parser.convertAttributeValue(this.minValue,{type:"NUMERIC",decimal:this.decimal})),""!=this.maxValue&&null==this.maxValueError&&(t["max-value"]=this.$parser.convertAttributeValue(this.maxValue,{type:"NUMERIC",decimal:this.decimal})),0!=this.decimal&&this.strip&&(t.strip=1);break;case"DATETIME":this.time&&(t.time=1),this.local&&(t.local=1);break;case"USER":this.members&&(t.members=1),this.multiSelect&&(t["multi-select"]=1)}return t},extractItems(){const t=this.items.split("\n"),e=[];for(let i in t)try{const s=this.$parser.normalizeString(t[i],r.m.Value,{allowEmpty:!0});""!=s&&e.indexOf(s)<0&&e.push(s)}catch(t){}this.extractedItems=e},returnToDetails(){this.$router.push("TypeDetails",{typeId:this.typeId})},deleteAttribute(){this.$router.push("DeleteAttribute",{typeId:this.typeId,attributeId:this.attributeId})}},mounted(){this.$refs.name.focus()}},u=i(84),m=Object(u.a)(o,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.title,"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails},scopedSlots:t._u([{key:"header",fn:function(){return["edit"==t.mode?e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.deleteAttribute}},[e("span",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Delete"))+"\n    ")]):t._e()]},proxy:!0}])},[t._v(" "),"edit"==t.mode?e("Prompt",{attrs:{path:"prompt.ModifyAttribute"}},[e("strong",[t._v(t._s(t.initialName))])]):"add"==t.mode?e("Prompt",{attrs:{path:"prompt.AddAttribute"}},[e("strong",[t._v(t._s(t.typeName))])]):t._e(),t._v(" "),e("FormInput",t._b({ref:"name",attrs:{id:"name",label:t.$t("label.Name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"FormInput",t.$field("name"),!1)),t._v(" "),e("FormDropdown",t._b({ref:"attributeType",attrs:{label:t.$t("label.AttributeType"),items:t.attributeTypes,"item-names":t.attibuteTypeNames},model:{value:t.attributeType,callback:function(e){t.attributeType=e},expression:"attributeType"}},"FormDropdown",t.$field("attributeType"),!1)),t._v(" "),e("Panel",{attrs:{title:t.$t("title.AttributeDetails")}},["TEXT"==t.attributeType?[e("FormCheckbox",{attrs:{label:t.$t("text.AllowMultipleLines")},model:{value:t.multiLine,callback:function(e){t.multiLine=e},expression:"multiLine"}}),t._v(" "),e("FormInput",t._b({attrs:{id:"minLength",label:t.$t("label.MinimumLength")},model:{value:t.minLength,callback:function(e){t.minLength=e},expression:"minLength"}},"FormInput",t.$field("minLength"),!1)),t._v(" "),e("FormInput",t._b({attrs:{id:"maxLength",label:t.$t("label.MaximumLength")},model:{value:t.maxLength,callback:function(e){t.maxLength=e},expression:"maxLength"}},"FormInput",t.$field("maxLength"),!1))]:"ENUM"==t.attributeType?[e("FormCheckbox",{attrs:{label:t.$t("text.AllowCustomValues")},model:{value:t.editable,callback:function(e){t.editable=e},expression:"editable"}}),t._v(" "),e("FormCheckbox",{attrs:{label:t.$t("text.AllowMultipleItems")},model:{value:t.multiSelect,callback:function(e){t.multiSelect=e},expression:"multiSelect"}}),t._v(" "),e("FormGroup",t._b({attrs:{id:"items",label:t.$t("label.DropdownListItems"),help:t.$t("prompt.EnterDropdownListItems")}},"FormGroup",t.$field("items"),!1),[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.items,expression:"items"}],staticClass:"form-control",attrs:{id:"items",rows:"6"},domProps:{value:t.items},on:{change:t.extractItems,input:function(e){e.target.composing||(t.items=e.target.value)}}})]),t._v(" "),e("FormInput",t._b({attrs:{id:"minLength",label:t.$t("label.MinimumLength"),disabled:!t.editable||t.multiSelect},model:{value:t.minLength,callback:function(e){t.minLength=e},expression:"minLength"}},"FormInput",t.$field("minLength"),!1)),t._v(" "),e("FormInput",t._b({attrs:{id:"maxLength",label:t.$t("label.MaximumLength"),disabled:!t.editable||t.multiSelect},model:{value:t.maxLength,callback:function(e){t.maxLength=e},expression:"maxLength"}},"FormInput",t.$field("maxLength"),!1))]:"NUMERIC"==t.attributeType?[e("FormDropdown",t._b({attrs:{id:"decimal",label:t.$t("label.DecimalPlaces"),items:t.decimalItems,"item-names":t.decimalNames},model:{value:t.decimal,callback:function(e){t.decimal=e},expression:"decimal"}},"FormDropdown",t.$field("decimal"),!1)),t._v(" "),e("FormInput",t._b({attrs:{id:"minValue",label:t.$t("label.MinimumValue")},model:{value:t.minValue,callback:function(e){t.minValue=e},expression:"minValue"}},"FormInput",t.$field("minValue"),!1)),t._v(" "),e("FormInput",t._b({attrs:{id:"maxValue",label:t.$t("label.MaximumValue")},model:{value:t.maxValue,callback:function(e){t.maxValue=e},expression:"maxValue"}},"FormInput",t.$field("maxValue"),!1)),t._v(" "),e("FormCheckbox",{attrs:{label:t.$t("text.StripTrailingZeros"),disabled:0==t.decimal},model:{value:t.strip,callback:function(e){t.strip=e},expression:"strip"}})]:"DATETIME"==t.attributeType?[e("FormGroup",{attrs:{label:t.$t("label.DateSettings")}},[e("div",{staticClass:"radio"},[e("label",[e("input",{attrs:{type:"radio"},domProps:{checked:!t.time&&!t.local},on:{change:function(e){t.time=!1,t.local=!1}}}),t._v(" "+t._s(t.$t("text.DateOnly")))])]),t._v(" "),e("div",{staticClass:"radio"},[e("label",[e("input",{attrs:{type:"radio"},domProps:{checked:t.time&&!t.local},on:{change:function(e){t.time=!0,t.local=!1}}}),t._v(" "+t._s(t.$t("text.DateAndTime")))])]),t._v(" "),e("div",{staticClass:"radio"},[e("label",[e("input",{attrs:{type:"radio"},domProps:{checked:t.time&&t.local},on:{change:function(e){t.time=!0,t.local=!0}}}),t._v(" "+t._s(t.$t("text.DateAndTimeLocal")))])])])]:"USER"==t.attributeType?[e("FormCheckbox",{attrs:{label:t.$t("text.AllowOnlyMembers")},model:{value:t.members,callback:function(e){t.members=e},expression:"members"}}),t._v(" "),e("FormCheckbox",{attrs:{label:t.$t("text.AllowMultipleItems")},model:{value:t.multiSelect,callback:function(e){t.multiSelect=e},expression:"multiSelect"}})]:t._e()],2),t._v(" "),e("FormCheckbox",{attrs:{label:t.$t("text.AttributeIsRequired")},model:{value:t.required,callback:function(e){t.required=e},expression:"required"}}),t._v(" "),e("FormGroup",t._b({attrs:{id:"defaultValue",label:t.$t("label.DefaultValue")}},"FormGroup",t.$field("defaultValue"),!1),[e("ValueEditor",{attrs:{id:"defaultValue",attribute:t.attribute,"with-expressions":""},model:{value:t.defaultValue,callback:function(e){t.defaultValue=e},expression:"defaultValue"}})],1)],1)}),[],!1,null,null,null);e.default=m.exports},128:function(t,e,i){"use strict";i.r(e);var r=i(85),s={props:{mode:String,typeId:Number,initialName:String},fields(){return{name:{value:this.initialName,type:String,required:!0,maxLength:r.m.Name}}},computed:{title(){return"rename"==this.mode?this.$t("cmd.RenameType"):"add"==this.mode?this.$t("cmd.AddType"):void 0}},methods:{submit(){if(!this.$fields.validate())return;if("rename"==this.mode&&!this.$fields.modified())return void this.returnToDetails(this.typeId);const t={};"rename"==this.mode&&(t.typeId=this.typeId),t.name=this.name,this.$form.block(),this.$ajax.post("/types/"+this.mode+".php",t).then(t=>{let{typeId:e,changed:i}=t;i&&this.$store.commit("global/setDirty"),this.returnToDetails(e)}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.TypeAlreadyExists?(this.$form.unblock(),this.nameError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.name.focus()})):this.$form.error(t)})},cancel(){"rename"==this.mode?this.returnToDetails(this.typeId):this.$router.push("ManageTypes")},returnToDetails(t){this.$router.push("TypeDetails",{typeId:t})}},mounted(){this.$refs.name.focus()}},a=i(84),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.title,size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.cancel}},["rename"==t.mode?e("Prompt",{attrs:{path:"prompt.RenameType"}},[e("strong",[t._v(t._s(t.initialName))])]):"add"==t.mode?e("Prompt",{attrs:{path:"prompt.AddType"}}):t._e(),t._v(" "),e("FormInput",t._b({ref:"name",attrs:{id:"name",label:t.$t("label.Name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"FormInput",t.$field("name"),!1))],1)}),[],!1,null,null,null);e.default=l.exports},129:function(t,e,i){"use strict";i.r(e);var r=i(86),s=i(85),a=i(93);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u={props:{mode:String,typeId:Number,typeName:String,viewId:Number,isPublic:Boolean,initialName:String,initialView:Object,attributes:Array},fields(){return{name:{value:this.initialName,type:String,required:!0,maxLength:s.m.Name,condition:"add"==this.mode||"edit"==this.mode||"clone"==this.mode},sortColumn:{value:this.initialView.sortColumn,type:Number},sortAscending:{value:this.initialView.sortAscending,type:Boolean}}},data(){const t={columns:this.initialView.columns,filters:[],nextId:1,availableFilter:"",allFilter:""};return null!=this.initialView.filters&&(t.filters=this.initialView.filters.map(e=>{const i=this.getAttributeForParser(e),r=this.$formatter.formatExpression(e.value,i);return{id:t.nextId++,column:e.column,operator:e.operator,value:r,error:null}})),t},computed:n(n({},Object(r.b)("global",["isAdministrator"])),{},{title(){return"default"==this.mode?this.$t("title.DefaultView"):"add"==this.mode?this.isPublic?this.$t("cmd.AddPublicView"):this.$t("cmd.AddPersonalView"):"edit"==this.mode?this.$t("cmd.EditView"):"clone"==this.mode?this.$t("cmd.CloneView"):void 0},promptPath(){return"default"==this.mode?"prompt.EditDefaultView":"add"==this.mode?this.isPublic?"prompt.AddPublicView":"prompt.AddPersonalView":"edit"==this.mode?this.isPublic?"prompt.EditPublicView":"prompt.EditPersonalView":"clone"==this.mode?this.isPublic?"prompt.ClonePublicView":"prompt.ClonePersonalView":void 0},allColumns(){return[s.e.ID,s.e.Name,s.e.CreatedDate,s.e.CreatedBy,s.e.ModifiedDate,s.e.ModifiedBy,...this.attributes.map(t=>s.e.UserDefined+t.id)]},availableColumns(){return this.allColumns.filter(t=>!this.columns.includes(t))},filteredAllColumns(){return this.filterColumns(this.allColumns,this.allFilter)},filteredAvailableColumns(){return this.filterColumns(this.availableColumns,this.availableFilter)},columnNames(){return this.columns.map(t=>this.getColumnName(t))}}),methods:{submit(){let t=this.$fields.validate();if("add"!=this.mode&&"edit"!=this.mode&&"clone"!=this.mode||(t=this.validateFilters(t)),!t)return;const e=this.columns.join(","),i=this.initialView.columns.join(",");if("default"==this.mode&&!this.$fields.modified()&&e==i)return void this.returnToDetails();if("edit"==this.mode&&!this.$fields.modified()&&e==i&&this.areFiltersEqual(this.initialView.filters,this.filters))return void this.returnToDetails();const r={};"default"==this.mode||"add"==this.mode||"clone"==this.mode?r.typeId=this.typeId:r.viewId=this.viewId,"add"!=this.mode&&"clone"!=this.mode||(r.isPublic=this.isPublic),"add"!=this.mode&&"edit"!=this.mode&&"clone"!=this.mode||(r.name=this.name),r.columns=e,r.sortColumn=this.sortColumn,r.sortAscending=this.sortAscending,"add"!=this.mode&&"edit"!=this.mode&&"clone"!=this.mode||(r.filters=this.filters.map(t=>{const e=this.getAttributeForParser(t),i=this.$parser.convertExpression(t.value,e);return{column:t.column,operator:t.operator,value:i}})),this.$form.block(),this.$ajax.post("/types/views/"+("clone"==this.mode?"add":this.mode)+".php",r).then(t=>{let{changed:e}=t;e&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{t.reason==s.n.APIError&&t.errorCode==s.g.ViewAlreadyExists?(this.$form.unblock(),this.nameError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.name.focus()})):this.$form.error(t)})},isFixedColumn:t=>t==s.e.ID||t==s.e.Name,getColumnName:a.a,filterColumns(t,e){return""==e?t:(e=e.toUpperCase(),t.filter(t=>this.getColumnName(t).toUpperCase().includes(e)))},canMoveColumn(t){return!this.isFixedColumn(t.relatedContext.element)},addColumn(t){this.columns=[...this.columns,t]},removeColumn(t){this.columns=this.columns.filter(e=>e!=t),this.sortColumn==t&&(this.sortColumn=s.e.ID)},getColumnType(t){switch(t){case s.e.ID:return"NUMERIC";case s.e.Name:return"TEXT";case s.e.CreatedBy:case s.e.ModifiedBy:return"USER";case s.e.CreatedDate:case s.e.ModifiedDate:return"DATETIME";default:if(t>s.e.UserDefined){const e=this.attributes.find(e=>e.id==t-s.e.UserDefined);if(null!=e)return e.type}}},getAttributeForEditor(t){const e=this.getColumnType(t.column),i={type:e};if("ENUM"==e){const e=this.attributes.find(e=>e.id==t.column-s.e.UserDefined);null!=e&&(i.items=e.items)}return"IN"==t.operator&&(i["multi-select"]=1),i},getAttributeForParser(t){const e=this.getColumnType(t.column);let i={type:e};switch(e){case"TEXT":case"ENUM":case"USER":i={type:"ENUM",editable:1};break;case"NUMERIC":if(t.column>s.e.UserDefined){const e=this.attributes.find(e=>e.id==t.column-s.e.UserDefined);null!=e&&(i.decimal=e.decimal,i.strip=e.strip)}}return"EQ"!=t.operator&&"NEQ"!=t.operator&&(i.required=1),"IN"==t.operator&&(i["multi-select"]=1),i},getOperators(t){let e=["EQ","NEQ"];switch(this.getColumnType(t)){case"TEXT":case"ENUM":case"USER":e=[...e,"BEG","CON","END","IN"];break;case"NUMERIC":case"DATETIME":e=[...e,"LT","LTE","GT","GTE"]}return e},getOperatorName(t){return this.$t("Operator."+t)},addFilter(t){this.filters=[...this.filters,{id:this.nextId++,column:t,operator:"EQ",value:"",error:null}]},removeFilter(t){this.filters=this.filters.filter(e=>e!=t)},validateFilters(t){for(let e=0;e<this.filters.length;e++){const i=this.filters[e];i.error=null;const r=this.getAttributeForParser(i);try{i.value=this.$parser.normalizeString(i.value,s.m.Value,{allowEmpty:!0}),i.value=this.$parser.normalizeExpression(i.value,r)}catch(t){if(t.reason!=s.n.APIError)throw t;i.error=this.$t("ErrorCode."+t.errorCode)}null!=i.error&&(t&&this.$refs["filter"+i.id][0].focus(),t=!1)}return t},areFiltersEqual(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(t[i].column!=e[i].column||t[i].operator!=e[i].operator||t[i].value!=e[i].value)return!1;return!0},cloneView(){this.$router.push("CloneView",{typeId:this.typeId,viewId:this.viewId})},unpublishView(){this.$router.push("UnpublishView",{typeId:this.typeId,viewId:this.viewId})},publishView(){this.$router.push("PublishView",{typeId:this.typeId,viewId:this.viewId})},deleteView(){this.$router.push("DeleteView",{typeId:this.typeId,viewId:this.viewId})},returnToDetails(){this.$router.push("ViewSettings",{typeId:this.typeId})}},mounted(){null!=this.$refs.name&&this.$refs.name.focus()}},m=i(84),c=Object(m.a)(u,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.title,"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails},scopedSlots:t._u([{key:"header",fn:function(){return["edit"==t.mode?e("DropdownButton",{attrs:{"fa-class":"fa-ellipsis-v","menu-class":"dropdown-menu-right",title:t.$t("title.More")}},[e("li",[e("HyperLink",{on:{click:t.cloneView}},[e("span",{staticClass:"fa fa-clone",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.CloneView")))])],1),t._v(" "),t.isPublic?e("li",[e("HyperLink",{on:{click:t.unpublishView}},[e("span",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.UnpublishView")))])],1):t.isAdministrator?e("li",[e("HyperLink",{on:{click:t.publishView}},[e("span",{staticClass:"fa fa-upload",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.PublishView")))])],1):t._e(),t._v(" "),e("li",[e("HyperLink",{on:{click:t.deleteView}},[e("span",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.DeleteView")))])],1)]):t._e()]},proxy:!0}])},[t._v(" "),"default"==t.mode||"add"==t.mode?e("Prompt",{attrs:{path:t.promptPath}},[e("strong",[t._v(t._s(t.typeName))])]):e("Prompt",{attrs:{path:t.promptPath}},[e("strong",[t._v(t._s(t.initialName))])]),t._v(" "),"add"==t.mode||"edit"==t.mode||"clone"==t.mode?e("FormInput",t._b({ref:"name",attrs:{id:"name",label:t.$t("label.Name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"FormInput",t.$field("name"),!1)):t._e(),t._v(" "),e("FormSection",{attrs:{title:t.$t("title.Columns")}},[t.availableColumns.length>0?e("DropdownFilterButton",{attrs:{"fa-class":"fa-plus","menu-class":"dropdown-menu-right",title:t.$t("cmd.AddColumn"),filter:t.availableFilter},on:{"update:filter":function(e){t.availableFilter=e}}},t._l(t.filteredAvailableColumns,(function(i){return e("li",{key:i},[e("HyperLink",{on:{click:function(e){return t.addColumn(i)}}},[t._v(t._s(t.getColumnName(i)))])],1)})),0):t._e()],1),t._v(" "),e("Draggable",{staticClass:"draggable-container",attrs:{handle:".draggable-handle",move:t.canMoveColumn},model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}},t._l(t.columns,(function(i){return e("div",{key:i,staticClass:"draggable-item"},[t.isFixedColumn(i)?t._e():e("button",{staticClass:"btn btn-default",attrs:{title:t.$t("cmd.Remove")},on:{click:function(e){return t.removeColumn(i)}}},[e("span",{staticClass:"fa fa-remove",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{class:t.isFixedColumn(i)?"draggable-fixed":"draggable-handle"},[e("span",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.getColumnName(i)))])])})),0),t._v(" "),e("Panel",{attrs:{title:t.$t("title.SortOrder")}},[e("FormDropdown",{attrs:{label:t.$t("label.Column"),items:t.columns,"item-names":t.columnNames,"with-filter":""},model:{value:t.sortColumn,callback:function(e){t.sortColumn=e},expression:"sortColumn"}}),t._v(" "),e("FormGroup",{attrs:{label:t.$t("label.Order")}},[e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortAscending,expression:"sortAscending"}],attrs:{type:"radio"},domProps:{value:!0,checked:t._q(t.sortAscending,!0)},on:{change:function(e){t.sortAscending=!0}}}),t._v(" "+t._s(t.$t("text.Ascending")))])]),t._v(" "),e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortAscending,expression:"sortAscending"}],attrs:{type:"radio"},domProps:{value:!1,checked:t._q(t.sortAscending,!1)},on:{change:function(e){t.sortAscending=!1}}}),t._v(" "+t._s(t.$t("text.Descending")))])])])],1),t._v(" "),"add"==t.mode||"edit"==t.mode||"clone"==t.mode?[e("FormSection",{attrs:{title:t.$t("title.Filters")}},[e("DropdownFilterButton",{attrs:{"fa-class":"fa-plus","menu-class":"dropdown-menu-right",title:t.$t("cmd.AddFilter"),filter:t.allFilter},on:{"update:filter":function(e){t.allFilter=e}}},t._l(t.filteredAllColumns,(function(i){return e("li",{key:i},[e("HyperLink",{on:{click:function(e){return t.addFilter(i)}}},[t._v(t._s(t.getColumnName(i)))])],1)})),0)],1),t._v(" "),t.filters.length>0?e("Draggable",{staticClass:"filters",attrs:{handle:".filters-name"},model:{value:t.filters,callback:function(e){t.filters=e},expression:"filters"}},t._l(t.filters,(function(i){return e("div",{key:i.id,staticClass:"row"},[e("button",{staticClass:"btn btn-default",attrs:{title:t.$t("cmd.Remove")},on:{click:function(e){return t.removeFilter(i)}}},[e("span",{staticClass:"fa fa-remove",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{staticClass:"col-xs-10 col-sm-3 filters-name"},[e("span",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.getColumnName(i.column)))]),t._v(" "),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("DropdownScrollButton",{attrs:{text:t.getOperatorName(i.operator)}},t._l(t.getOperators(i.column),(function(r){return e("li",{key:r,class:{active:r==i.operator}},[e("HyperLink",{on:{click:function(t){i.operator=r}}},[t._v(t._s(t.getOperatorName(r)))])],1)})),0)],1),t._v(" "),e("div",{class:"col-xs-12 col-sm-4"+(null!=i.error?" form-group has-error":"")},[e("ValueEditor",{ref:"filter"+i.id,refInFor:!0,attrs:{attribute:t.getAttributeForEditor(i),"with-expressions":""},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}}),t._v(" "),null!=i.error?e("p",{staticClass:"help-block"},[t._v(t._s(i.error))]):t._e()],1)])})),0):e("div",{staticClass:"alert alert-info"},[t._v("\n      "+t._s(t.$t("info.NoFilters"))+"\n    ")])]:t._e()],2)}),[],!1,null,null,null);e.default=c.exports},130:function(t,e,i){"use strict";i.r(e);var r=i(86);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n={props:{types:Array},computed:a(a({},Object(r.b)("global",["isAdministrator"])),{},{columns(){return{name:{title:this.$t("title.Name"),class:"column-large"}}}}),methods:{addType(){this.$router.push("AddType")},rowClick(t){this.$router.push("TypeDetails",{typeId:this.types[t].id})}}},o=i(84),u=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("title.IssueTypes"),"auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[t.isAdministrator?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addType}},[e("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add")))]):t._e()]},proxy:!0}])},[t._v(" "),t.types.length>0?e("Grid",{attrs:{items:t.types,columns:t.columns},on:{"row-click":t.rowClick}}):e("Prompt",{attrs:{path:t.isAdministrator?"info.NoIssueTypes":"info.NoAvailableIssueTypes"}})],1)}),[],!1,null,null,null);e.default=u.exports},131:function(t,e,i){"use strict";i.r(e);var r=i(85),s={props:{mode:String,typeId:Number,viewId:Number,name:String},data:()=>({errorPath:null}),computed:{title(){return"publish"==this.mode?this.$t("cmd.PublishView"):"unpublish"==this.mode?this.$t("cmd.UnpublishView"):void 0},promptPath(){return"publish"==this.mode?"prompt.PublishView":"unpublish"==this.mode?"prompt.UnpublishView":void 0}},methods:{submit(){if(null!=this.errorPath)return void this.returnToDetails();this.$form.block();const t={viewId:this.viewId};this.$ajax.post("/types/views/"+this.mode+".php",t).then(t=>{let{changed:e}=t;e&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.ViewAlreadyExists?(this.$form.unblock(),this.errorPath="ErrorCode."+t.errorCode):this.$form.error(t)})},returnToDetails(){this.$router.push("ViewSettings",{typeId:this.typeId})}}},a=i(84),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.title,size:"small","with-buttons":"","cancel-hidden":null!=t.errorPath},on:{ok:t.submit,cancel:t.returnToDetails}},[null==t.errorPath?e("Prompt",{attrs:{path:t.promptPath}},[e("strong",[t._v(t._s(t.name))])]):e("Prompt",{attrs:{path:t.errorPath,"alert-class":"alert-danger"}})],1)}),[],!1,null,null,null);e.default=l.exports},132:function(t,e,i){"use strict";i.r(e);i(85);var r={props:{typeId:Number,name:String,initialAttributes:Array},data(){return{attributes:this.initialAttributes}},methods:{submit(){const t=this.attributes.map(t=>t.id).join(",");if(t==this.initialAttributes.map(t=>t.id).join(","))return void this.returnToDetails();const e={typeId:this.typeId,order:t};this.$form.block(),this.$ajax.post("/types/attributes/reorder.php",e).then(t=>{let{changed:e}=t;e&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{this.$form.error(t)})},returnToDetails(){this.$router.push("TypeDetails",{typeId:this.typeId})}}},s=i(84),a=Object(s.a)(r,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.ChangeOrder"),"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.ChangeOrder"}},[e("strong",[t._v(t._s(t.name))])]),t._v(" "),e("Draggable",{staticClass:"draggable-container",attrs:{handle:".draggable-handle"},model:{value:t.attributes,callback:function(e){t.attributes=e},expression:"attributes"}},t._l(t.attributes,(function(i){return e("div",{key:i.id,staticClass:"draggable-item"},[e("div",{staticClass:"draggable-handle"},[e("span",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(i.name))])])})),0)],1)}),[],!1,null,null,null);e.default=a.exports},133:function(t,e,i){"use strict";i.r(e);var r=i(86);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n={props:{typeId:Number,name:String,attributes:Array},computed:a(a({},Object(r.b)("global",["isAdministrator"])),{},{breadcrumbs(){return[{label:this.$t("title.IssueTypes"),route:"ManageTypes"}]},columns(){return{name:{title:this.$t("title.Name"),class:"column-large"},type:{title:this.$t("title.Type")},default:{title:this.$t("title.DefaultValue")},required:{title:this.$t("title.Required"),class:"column-small"}}}}),methods:{renameType(){this.$router.push("RenameType",{typeId:this.typeId})},deleteType(){this.$router.push("DeleteType",{typeId:this.typeId})},viewSettings(){this.$router.push("ViewSettings",{typeId:this.typeId})},addAttribute(){this.$router.push("AddAttribute",{typeId:this.typeId})},reorderAttributes(){this.$router.push("ReorderAttributes",{typeId:this.typeId})},rowClick(t){this.$router.push("EditAttribute",{typeId:this.typeId,attributeId:this.attributes[t].id})}}},o=i(84),u=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.name,breadcrumbs:t.breadcrumbs,size:"large","auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.viewSettings}},[e("span",{staticClass:"fa fa-binoculars",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("title.ViewSettings")))]),t._v(" "),t.isAdministrator?e("DropdownButton",{attrs:{"fa-class":"fa-ellipsis-v","menu-class":"dropdown-menu-right",title:t.$t("title.More")}},[e("li",[e("HyperLink",{on:{click:t.renameType}},[e("span",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.RenameType")))])],1),t._v(" "),e("li",[e("HyperLink",{on:{click:t.deleteType}},[e("span",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.DeleteType")))])],1)]):t._e()]},proxy:!0}])},[t._v(" "),e("FormSection",{attrs:{title:t.$t("title.Attributes")}},[t.isAdministrator?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addAttribute}},[e("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add")))]):t._e(),t._v(" "),t.isAdministrator&&t.attributes.length>1?e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.reorderAttributes}},[e("span",{staticClass:"fa fa-random",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ChangeOrder"))+"\n    ")]):t._e()]),t._v(" "),t.attributes.length>0?e("Grid",{attrs:{items:t.attributes,columns:t.columns,"row-click-disabled":!t.isAdministrator},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"type-cell",fn:function(e){let{item:i}=e;return[t._v("\n      "+t._s(t.$t("AttributeType."+i.type))+"\n    ")]}},{key:"default-cell",fn:function(e){let{item:i}=e;return[t._v("\n      "+t._s(t.$formatter.formatExpression(i.default,i))+"\n    ")]}},{key:"required-cell",fn:function(e){let{item:i}=e;return[t._v("\n      "+t._s(1==i.required?t.$t("text.Yes"):t.$t("text.No"))+"\n    ")]}}],null,!1,42963056)}):e("div",{staticClass:"alert alert-info"},[t._v("\n    "+t._s(t.$t("info.NoAttributes"))+"\n  ")])],1)}),[],!1,null,null,null);e.default=u.exports},134:function(t,e,i){"use strict";i.r(e);var r=i(86),s=i(93);function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o={props:{typeId:Number,name:String,defaultView:Object,publicViews:Array,personalViews:Array,attributes:Array},computed:l(l({},Object(r.b)("global",["isAdministrator"])),{},{breadcrumbs(){return[{label:this.$t("title.IssueTypes"),route:"ManageTypes"},{label:this.name,route:"TypeDetails",params:{typeId:this.typeId}}]},columns(){return{name:{title:this.$t("title.Name"),class:"column-medium"},columns:{title:this.$t("title.Columns"),class:"column-xlarge"},sort:{title:this.$t("title.SortBy")}}},defaultColumns(){return this.defaultView.columns.map(t=>this.getColumnName(t)).join(", ")},defaultSortBy(){return this.getSortBy(this.defaultView.sortColumn,this.defaultView.sortAscending)}}),methods:{getColumns(t){return t.columns.map(t=>this.getColumnName(t)).join(", ")},getColumnName:s.a,getSortBy(t,e){return this.getColumnName(t)+" ("+(e?this.$t("text.ascending"):this.$t("text.descending"))+")"},editDefaultView(){this.$router.push("EditDefaultView",{typeId:this.typeId})},addPublicView(){this.$router.push("AddPublicView",{typeId:this.typeId})},addPersonalView(){this.$router.push("AddPersonalView",{typeId:this.typeId})},rowClickPublic(t){this.$router.push("EditView",{typeId:this.typeId,viewId:this.publicViews[t].id})},rowClickPersonal(t){this.$router.push("EditView",{typeId:this.typeId,viewId:this.personalViews[t].id})}}},u=i(84),m=Object(u.a)(o,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("title.ViewSettings"),breadcrumbs:t.breadcrumbs,size:"large","auto-close":"","save-position":""}},[t.isAdministrator?[e("FormSection",{attrs:{title:t.$t("title.DefaultView")}},[e("button",{staticClass:"btn btn-default",attrs:{type:"button",title:t.$t("cmd.EditDefaultView")},on:{click:t.editDefaultView}},[e("span",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Edit"))+"\n      ")])]),t._v(" "),e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"panel-body panel-table"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-3 col-sm-2"},[t._v(t._s(t.$t("label.Columns")))]),t._v(" "),e("div",{staticClass:"col-xs-9 col-sm-10"},[t._v(t._s(t.defaultColumns))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-3 col-sm-2"},[t._v(t._s(t.$t("label.SortBy")))]),t._v(" "),e("div",{staticClass:"col-xs-9 col-sm-10"},[t._v(t._s(t.defaultSortBy))])])])]),t._v(" "),e("FormSection",{attrs:{title:t.$t("title.PublicViews")}},[e("button",{staticClass:"btn btn-success",attrs:{type:"button",title:t.$t("cmd.AddPublicView")},on:{click:t.addPublicView}},[e("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add"))+"\n      ")])]),t._v(" "),t.publicViews.length>0?e("Grid",{attrs:{items:t.publicViews,columns:t.columns},on:{"row-click":t.rowClickPublic},scopedSlots:t._u([{key:"columns-cell",fn:function(e){let{item:i}=e;return[t._v("\n        "+t._s(t.getColumns(i))+"\n      ")]}},{key:"sort-cell",fn:function(e){let{item:i}=e;return[t._v("\n        "+t._s(t.getSortBy(i.sortColumn,i.sortAscending))+"\n      ")]}}],null,!1,3040755163)}):e("div",{staticClass:"alert alert-info"},[t._v("\n      "+t._s(t.$t("info.NoPublicViews"))+"\n    ")])]:t._e(),t._v(" "),e("FormSection",{attrs:{title:t.$t("title.PersonalViews")}},[e("button",{staticClass:"btn btn-success",attrs:{type:"button",title:t.$t("cmd.AddPersonalView")},on:{click:t.addPersonalView}},[e("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add"))+"\n    ")])]),t._v(" "),t.personalViews.length>0?e("Grid",{attrs:{items:t.personalViews,columns:t.columns},on:{"row-click":t.rowClickPersonal},scopedSlots:t._u([{key:"columns-cell",fn:function(e){let{item:i}=e;return[t._v("\n      "+t._s(t.getColumns(i))+"\n    ")]}},{key:"sort-cell",fn:function(e){let{item:i}=e;return[t._v("\n      "+t._s(t.getSortBy(i.sortColumn,i.sortAscending))+"\n    ")]}}],null,!1,1174715739)}):e("div",{staticClass:"alert alert-info"},[t._v("\n    "+t._s(t.$t("info.NoPersonalViews"))+"\n  ")])],2)}),[],!1,null,null,null);e.default=m.exports},93:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var r=i(85);function s(t){switch(t){case r.e.ID:return this.$t("title.ID");case r.e.Name:return this.$t("title.Name");case r.e.CreatedBy:return this.$t("title.CreatedBy");case r.e.CreatedDate:return this.$t("title.CreatedDate");case r.e.ModifiedBy:return this.$t("title.ModifiedBy");case r.e.ModifiedDate:return this.$t("title.ModifiedDate");default:if(t>r.e.UserDefined){const e=this.attributes.find(e=>e.id==t-r.e.UserDefined);if(null!=e)return e.name}return this.$t("text.UnknownColumn")}}}}]);