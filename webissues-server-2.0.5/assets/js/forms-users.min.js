/*!
 * WebIssues v2.0.5
 * Copyright (C) 2007-2020 WebIssues Team
 * License: Affero GPL v3.0
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{135:function(t,e,s){"use strict";s.r(e);var r=s(86);function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function a(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o={props:{requestId:Number,name:String},data:()=>({selectedProjects:[]}),computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(r.c)("global",["projects"])),methods:{selectAll(t){this.selectedProjects=this.projects.map(e=>t)},submit(){this.$form.block();const t={requestId:this.requestId,projects:[]};for(const e in this.selectedProjects)this.selectedProjects[e]&&t.projects.push(this.projects[e].id);this.$ajax.post("/users/requests/approve.php",t).then(()=>{this.$router.push("RegistrationRequests")}).catch(t=>{this.$form.error(t)})},returnToDetails(){this.$router.push("RequestDetails",{requestId:this.requestId})}}},n=s(84),c=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.ApproveRequest"),"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.ApproveRequest"}},[e("strong",[t._v(t._s(t.name))])]),t._v(" "),t.projects.length>0?e("Panel",{attrs:{title:t.$t("title.Projects")},scopedSlots:t._u([{key:"heading",fn:function(){return[e("div",{staticClass:"panel-links"},[e("HyperLink",{on:{click:function(e){return t.selectAll(!0)}}},[t._v(t._s(t.$t("cmd.SelectAll")))]),t._v(" "),e("HyperLink",{on:{click:function(e){return t.selectAll(!1)}}},[t._v(t._s(t.$t("cmd.UnselectAll")))])],1)]},proxy:!0}],null,!1,1824297498)},[t._v(" "),e("div",{staticClass:"row checkbox-group"},t._l(t.projects,(function(s,r){return e("div",{key:s.id,staticClass:"col-xs-12 col-md-4"},[e("div",{staticClass:"checkbox"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProjects[r],expression:"selectedProjects[ index ]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedProjects[r])?t._i(t.selectedProjects[r],null)>-1:t.selectedProjects[r]},on:{change:function(e){var s=t.selectedProjects[r],i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=t._i(s,null);i.checked?o<0&&t.$set(t.selectedProjects,r,s.concat([null])):o>-1&&t.$set(t.selectedProjects,r,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.selectedProjects,r,a)}}}),t._v(" "+t._s(s.name))])])])})),0)]):e("Prompt",{attrs:{path:"info.NoAvailableProjects"}})],1)}),[],!1,null,null,null);e.default=c.exports},136:function(t,e,s){"use strict";s.r(e);var r=s(85),i=s(87),a={props:{userId:Number,name:String,accountMode:Boolean},fields(){return{password:{type:String,required:!0,maxLength:r.m.Password,condition:this.userId==this.$store.state.global.userId},newPassword:{type:String,required:!0,maxLength:r.m.Password},confirmPassword:{type:String,required:!0,maxLength:r.m.Password,parse:this.comparePassword},mustChangePassword:{type:Boolean}}},computed:{isOwn(){return this.userId==this.$store.state.global.userId}},methods:{submit(){if(!this.$fields.validate())return;const t={};this.isOwn?(t.password=this.password,t.newPassword=this.newPassword):(t.userId=this.userId,t.password=this.newPassword,t.mustChangePassword=this.mustChangePassword),this.$form.block(),this.$ajax.post(this.isOwn?"/account/password/edit.php":"/users/password/edit.php",t).then(()=>{this.returnToDetails()}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.IncorrectLogin?(this.$form.unblock(),this.passwordError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.password.focus()})):t.reason==r.n.APIError&&t.errorCode==r.g.CannotReusePassword?(this.$form.unblock(),this.newPasswordError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.newPassword.focus()})):this.$form.error(t)})},returnToDetails(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})},comparePassword(t){if(""!=this.newPassword&&this.newPassword!=t)throw Object(i.c)(this.$t("ErrorCode."+r.g.PasswordNotMatching));return t}},mounted(){this.isOwn?this.$refs.password.focus():this.$refs.newPassword.focus()}},o=s(84),n=Object(o.a)(a,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.ChangePassword"),"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[t.isOwn?e("Prompt",{attrs:{path:"prompt.ChangeOwnPassword"}}):e("Prompt",{attrs:{path:"prompt.ChangePassword"}},[e("strong",[t._v(t._s(t.name))])]),t._v(" "),t.isOwn?e("FormInput",t._b({ref:"password",attrs:{id:"password",type:"password",label:t.$t("label.CurrentPassword")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},"FormInput",t.$field("password"),!1)):t._e(),t._v(" "),e("FormInput",t._b({ref:"newPassword",attrs:{id:"newPassword",type:"password",label:t.$t("label.NewPassword")},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}},"FormInput",t.$field("newPassword"),!1)),t._v(" "),e("FormInput",t._b({ref:"confirmPassword",attrs:{id:"confirmPassword",type:"password",label:t.$t("label.ConfirmPassword")},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}},"FormInput",t.$field("confirmPassword"),!1)),t._v(" "),t.isOwn?t._e():e("FormCheckbox",{attrs:{label:t.$t("text.UserMustChangePassword")},model:{value:t.mustChangePassword,callback:function(e){t.mustChangePassword=e},expression:"mustChangePassword"}})],1)}),[],!1,null,null,null);e.default=n.exports},137:function(t,e,s){"use strict";s.r(e);var r=s(86),i=s(85),a=s(87);function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l={props:{mode:String,userId:Number,initialName:String,initialLogin:String,initialEmail:String,initialLanguage:String},fields(){const t=this.$store.state.global.userAccess==i.a.AdministratorAccess;return{name:{value:this.initialName,type:String,required:!0,maxLength:i.m.Name,condition:t},login:{value:this.initialLogin,type:String,required:!0,maxLength:i.m.Login,condition:t},sendInvitationEmail:{type:Boolean},password:{type:String,required:!0,maxLength:i.m.Password,condition:()=>"add"==this.mode&&!this.sendInvitationEmail},confirmPassword:{type:String,required:!0,maxLength:i.m.Password,parse:this.comparePassword,condition:()=>"add"==this.mode&&!this.sendInvitationEmail},mustChangePassword:{type:Boolean},email:{value:this.initialEmail,type:String,required:!1,maxLength:i.m.Value,parse:this.checkEmailAddress},language:{value:this.initialLanguage,type:String,required:!1}}},computed:n(n(n({},Object(r.c)("global",["languages"])),Object(r.b)("global",["isAdministrator"])),{},{title(){return"edit"==this.mode?this.$t("cmd.EditUser"):"account"==this.mode?this.$t("cmd.EditAccount"):"add"==this.mode?this.$t("cmd.AddUser"):void 0},canResetPassword(){return this.$store.state.global.settings.resetPassword},languageItems(){return this.languages.map(t=>t.key)},languageNames(){return this.languages.map(t=>t.name)}}),methods:{submit(){if(!this.$fields.validate())return;if(("edit"==this.mode||"account"==this.mode)&&!this.$fields.modified())return void this.returnToDetails(this.userId);const t={};let e;("edit"==this.mode||"account"==this.mode&&this.isAdministrator)&&(t.userId=this.userId),this.isAdministrator&&(t.name=this.name,t.login=this.login),this.sendInvitationEmail?t.sendInvitationEmail=!0:"add"==this.mode&&(t.password=this.password,t.mustChangePassword=this.mustChangePassword),t.email=this.email,t.language=this.language,this.$form.block(),e="account"==this.mode?this.isAdministrator?"/users/edit.php":"/account/edit.php":"/users/"+this.mode+".php",this.$ajax.post(e,t).then(t=>{let{userId:e,changed:s}=t;if(s&&this.$store.commit("global/setDirty"),s&&e==this.$store.state.global.userId){const t=""!=this.language?this.language:this.$store.state.global.settings.defaultLanguage;this.$i18n.setLocale(t).then(()=>{this.returnToDetails(e)})}else this.returnToDetails(e)}).catch(t=>{t.reason==i.n.APIError&&t.errorCode==i.g.UserAlreadyExists?(this.$form.unblock(),this.nameError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.name.focus()})):t.reason==i.n.APIError&&t.errorCode==i.g.LoginAlreadyExists?(this.$form.unblock(),this.loginError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.login.focus()})):t.reason==i.n.APIError&&t.errorCode==i.g.EmailAlreadyExists?(this.$form.unblock(),this.emailError=this.$t("ErrorCode."+t.errorCode),this.$nextTick(()=>{this.$refs.email.focus()})):this.$form.error(t)})},cancel(){"edit"==this.mode||"account"==this.mode?this.returnToDetails(this.userId):this.$router.push("ManageUsers")},returnToDetails(t){"account"==this.mode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:t})},comparePassword(t){if(""!=this.password&&this.password!=t)throw Object(a.c)(this.$t("ErrorCode."+i.g.PasswordNotMatching));return t},checkEmailAddress(t){if(""!=t)this.$parser.checkEmailAddress(t);else if(this.sendInvitationEmail)throw Object(a.c)(this.$t("error.NoEmailForInvitation"));return t}},mounted(){this.isAdministrator?this.$refs.name.focus():this.$refs.email.focus()}},u=s(84),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.title,"with-buttons":""},on:{ok:t.submit,cancel:t.cancel}},["edit"==t.mode?e("Prompt",{attrs:{path:"prompt.EditUser"}},[e("strong",[t._v(t._s(t.initialName))])]):"account"==t.mode?e("Prompt",{attrs:{path:"prompt.EditAccount"}}):"add"==t.mode?e("Prompt",{attrs:{path:"prompt.AddUser"}}):t._e(),t._v(" "),t.isAdministrator?e("FormInput",t._b({ref:"name",attrs:{id:"name",label:t.$t("label.Name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"FormInput",t.$field("name"),!1)):t._e(),t._v(" "),t.isAdministrator?e("FormInput",t._b({ref:"login",attrs:{id:"login",label:t.$t("label.Login")},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}},"FormInput",t.$field("login"),!1)):t._e(),t._v(" "),"add"==t.mode&&t.canResetPassword?e("FormCheckbox",{attrs:{label:t.$t("text.SendInvitationEmail")},model:{value:t.sendInvitationEmail,callback:function(e){t.sendInvitationEmail=e},expression:"sendInvitationEmail"}}):t._e(),t._v(" "),"add"==t.mode?e("FormInput",t._b({ref:"password",attrs:{id:"password",type:"password",label:t.$t("label.Password"),disabled:t.sendInvitationEmail},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},"FormInput",t.$field("password"),!1)):t._e(),t._v(" "),"add"==t.mode?e("FormInput",t._b({ref:"confirmPassword",attrs:{id:"confirmPassword",type:"password",label:t.$t("label.ConfirmPassword"),disabled:t.sendInvitationEmail},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}},"FormInput",t.$field("confirmPassword"),!1)):t._e(),t._v(" "),"add"==t.mode?e("FormCheckbox",{attrs:{label:t.$t("text.UserMustChangePassword"),disabled:t.sendInvitationEmail},model:{value:t.mustChangePassword,callback:function(e){t.mustChangePassword=e},expression:"mustChangePassword"}}):t._e(),t._v(" "),e("FormInput",t._b({ref:"email",attrs:{id:"email",label:t.$t("label.EmailAddress")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},"FormInput",t.$field("email"),!1)),t._v(" "),e("FormDropdown",{attrs:{label:t.$t("label.Language"),items:t.languageItems,"item-names":t.languageNames,"default-name":t.$t("text.DefaultLanguage")},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}})],1)}),[],!1,null,null,null);e.default=d.exports},138:function(t,e,s){"use strict";s.r(e);var r=s(85),i={props:{userId:Number,name:String,initialAccess:Number},fields(){return{access:{value:this.initialAccess,type:Number}}},data:()=>({noAccess:r.a.NoAccess,normalAccess:r.a.NormalAccess,administratorAccess:r.a.AdministratorAccess}),methods:{submit(){if(!this.$fields.validate())return;if(!this.$fields.modified())return void this.returnToDetails();const t={userId:this.userId,access:this.access};this.$form.block(),this.$ajax.post("/users/access.php",t).then(t=>{let{changed:e}=t;e&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{this.$form.error(t)})},returnToDetails(){this.$router.push("UserDetails",{userId:this.userId})}}},a=s(84),o=Object(a.a)(i,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("title.GlobalAccess"),size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.EditUserAccess"}},[e("strong",[t._v(t._s(t.name))])]),t._v(" "),e("FormGroup",{attrs:{label:t.$t("label.Access"),required:""}},[e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.noAccess,checked:t._q(t.access,t.noAccess)},on:{change:function(e){t.access=t.noAccess}}}),t._v(" "+t._s(t.$t("text.Disabled")))])]),t._v(" "),e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.normalAccess,checked:t._q(t.access,t.normalAccess)},on:{change:function(e){t.access=t.normalAccess}}}),t._v(" "+t._s(t.$t("text.RegularUser")))])]),t._v(" "),e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.administratorAccess,checked:t._q(t.access,t.administratorAccess)},on:{change:function(e){t.access=t.administratorAccess}}}),t._v(" "+t._s(t.$t("text.SystemAdministrator")))])])])],1)}),[],!1,null,null,null);e.default=o.exports},139:function(t,e,s){"use strict";s.r(e);var r=s(86),i=s(85);function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={props:{mode:String,userId:Number,projectId:Number,userName:String,projectName:String,initialAccess:Number,userProjects:Array,accountMode:Boolean},fields(){return{access:{value:this.initialAccess,type:Number}}},data:()=>({normalAccess:i.a.NormalAccess,administratorAccess:i.a.AdministratorAccess,selectedProjects:[]}),computed:o(o({},Object(r.c)("global",["projects"])),{},{title(){return"edit"==this.mode?this.$t("cmd.EditAccess"):"add"==this.mode?this.$t("cmd.AddProjects"):void 0},size(){return"edit"==this.mode?"small":"add"==this.mode?"normal":void 0},availableProjects(){return null!=this.userProjects?this.projects.filter(t=>this.userProjects.every(e=>e.id!=t.id)):[]}}),methods:{removeProject(){this.$router.push(this.accountMode?"RemoveAccountProject":"RemoveUserProject",{userId:this.userId,projectId:this.projectId})},selectAll(t){this.selectedProjects=this.availableProjects.map(e=>t)},submit(){if(!this.$fields.validate())return;if("edit"==this.mode&&!this.$fields.modified())return void this.returnToDetails();const t={userId:this.userId};if("edit"==this.mode)t.projects=[this.projectId];else{t.projects=[];for(const e in this.selectedProjects)this.selectedProjects[e]&&t.projects.push(this.availableProjects[e].id)}t.access=this.access,0!=t.projects.length?(this.$form.block(),this.$ajax.post("/users/projects/edit.php",t).then(t=>{let{changed:e}=t;e&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{this.$form.error(t)})):this.returnToDetails()},returnToDetails(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})}}},l=s(84),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.title,size:t.size,"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails},scopedSlots:t._u([{key:"header",fn:function(){return["edit"==t.mode?e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.removeProject}},[e("span",{staticClass:"fa fa-ban",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Remove"))+"\n    ")]):t._e()]},proxy:!0}])},[t._v(" "),"edit"==t.mode?e("Prompt",{attrs:{path:"prompt.EditMember"}},[e("strong",[t._v(t._s(t.projectName))]),e("strong",[t._v(t._s(t.userName))])]):"add"==t.mode?e("Prompt",{attrs:{path:"prompt.AddUserProjects"}},[e("strong",[t._v(t._s(t.userName))])]):t._e(),t._v(" "),"add"==t.mode&&t.availableProjects.length>0?e("Panel",{attrs:{title:t.$t("title.Projects")},scopedSlots:t._u([{key:"heading",fn:function(){return[e("div",{staticClass:"panel-links"},[e("HyperLink",{on:{click:function(e){return t.selectAll(!0)}}},[t._v(t._s(t.$t("cmd.SelectAll")))]),t._v(" "),e("HyperLink",{on:{click:function(e){return t.selectAll(!1)}}},[t._v(t._s(t.$t("cmd.UnselectAll")))])],1)]},proxy:!0}],null,!1,1824297498)},[t._v(" "),e("div",{staticClass:"row checkbox-group"},t._l(t.availableProjects,(function(s,r){return e("div",{key:s.id,staticClass:"col-xs-12 col-md-4"},[e("div",{staticClass:"checkbox"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProjects[r],expression:"selectedProjects[ index ]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedProjects[r])?t._i(t.selectedProjects[r],null)>-1:t.selectedProjects[r]},on:{change:function(e){var s=t.selectedProjects[r],i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=t._i(s,null);i.checked?o<0&&t.$set(t.selectedProjects,r,s.concat([null])):o>-1&&t.$set(t.selectedProjects,r,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.selectedProjects,r,a)}}}),t._v(" "+t._s(s.name))])])])})),0)]):"add"==t.mode?e("Prompt",{attrs:{path:"info.NoAvailableProjects","alert-class":"alert-warning"}}):t._e(),t._v(" "),e("FormGroup",{attrs:{label:t.$t("title.Access"),required:""}},[e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.normalAccess,checked:t._q(t.access,t.normalAccess)},on:{change:function(e){t.access=t.normalAccess}}}),t._v(" "+t._s(t.$t("text.RegularMember")))])]),t._v(" "),e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.administratorAccess,checked:t._q(t.access,t.administratorAccess)},on:{change:function(e){t.access=t.administratorAccess}}}),t._v(" "+t._s(t.$t("text.ProjectAdministrator")))])])])],1)}),[],!1,null,null,null);e.default=u.exports},140:function(t,e,s){"use strict";s.r(e);var r=s(85),i={props:{users:Array},computed:{columns(){return{name:{title:this.$t("title.Name"),class:"column-medium"},login:{title:this.$t("title.Login"),class:"column-medium"},email:{title:this.$t("title.Email"),class:"column-medium"},access:{title:this.$t("title.Access")}}},hasRegistrationRequests(){return this.$store.state.global.settings.selfRegister&&!this.$store.state.global.settings.registerAutoApprove}},methods:{getAccess(t){return t.access==r.a.NoAccess?this.$t("text.Disabled"):t.access==r.a.NormalAccess?t.projectAdmin?this.$t("text.ProjectAdministrator"):this.$t("text.RegularUser"):t.access==r.a.AdministratorAccess?this.$t("text.SystemAdministrator"):void 0},addUser(){this.$router.push("AddUser")},registrationRequests(){this.$router.push("RegistrationRequests")},rowClick(t){this.$router.push("UserDetails",{userId:this.users[t].id})}}},a=s(84),o=Object(a.a)(i,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("title.UserAccounts"),size:"large","auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addUser}},[e("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add")))]),t._v(" "),t.hasRegistrationRequests?e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.registrationRequests}},[e("span",{staticClass:"fa fa-user-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("title.RegistrationRequests"))+"\n    ")]):t._e()]},proxy:!0}])},[t._v(" "),e("Grid",{attrs:{items:t.users,columns:t.columns},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"access-cell",fn:function(e){let{item:s}=e;return[t._v("\n      "+t._s(t.getAccess(s))+"\n    ")]}}])})],1)}),[],!1,null,null,null);e.default=o.exports},141:function(t,e,s){"use strict";s.r(e);var r={props:{requests:Array},computed:{breadcrumbs(){return[{label:this.$t("title.UserAccounts"),route:"ManageUsers"}]},size(){return this.requests.length>0?"large":"normal"},columns(){return{name:{title:this.$t("title.Name"),class:"column-medium"},login:{title:this.$t("title.Login"),class:"column-medium"},email:{title:this.$t("title.Email"),class:"column-medium"},date:{title:this.$t("title.CreatedDate")}}}},methods:{rowClick(t){this.$router.push("RequestDetails",{requestId:this.requests[t].id})}}},i=s(84),a=Object(i.a)(r,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("title.RegistrationRequests"),breadcrumbs:t.breadcrumbs,size:t.size,"auto-close":"","save-position":""}},[t.requests.length>0?e("Grid",{attrs:{items:t.requests,columns:t.columns},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"date-cell",fn:function(e){let{item:s}=e;return[t._v("\n      "+t._s(t.$formatter.formatStamp(s.date))+"\n    ")]}}],null,!1,407176963)}):e("Prompt",{attrs:{path:"info.NoRegistrationRequests"}})],1)}),[],!1,null,null,null);e.default=a.exports},142:function(t,e,s){"use strict";s.r(e);var r={props:{requestId:Number,name:String},methods:{submit(){this.$form.block();const t={requestId:this.requestId};this.$ajax.post("/users/requests/reject.php",t).then(()=>{this.$router.push("RegistrationRequests")}).catch(t=>{this.$form.error(t)})},returnToDetails(){this.$router.push("RequestDetails",{requestId:this.requestId})}}},i=s(84),a=Object(i.a)(r,(function(){var t=this._self._c;return t("BaseForm",{attrs:{title:this.$t("cmd.RejectRequest"),size:"small","with-buttons":""},on:{ok:this.submit,cancel:this.returnToDetails}},[t("Prompt",{attrs:{path:"prompt.RejectRequest"}},[t("strong",[this._v(this._s(this.name))])])],1)}),[],!1,null,null,null);e.default=a.exports},143:function(t,e,s){"use strict";s.r(e);var r=s(85),i={props:{userId:Number,projectId:Number,userName:String,projectName:String,accountMode:Boolean},methods:{submit(){this.$form.block(),this.$ajax.post("/users/projects/edit.php",{userId:this.userId,projects:[this.projectId],access:r.a.NoAccess}).then(t=>{let{changed:e}=t;e&&this.$store.commit("global/setDirty"),this.returnToDetails()}).catch(t=>{this.$form.error(t)})},returnToDetails(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})}}},a=s(84),o=Object(a.a)(i,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.RemoveProject"),size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.RemoveMember"}},[e("strong",[t._v(t._s(t.userName))]),e("strong",[t._v(t._s(t.projectName))])])],1)}),[],!1,null,null,null);e.default=o.exports},144:function(t,e,s){"use strict";s.r(e);var r={props:{requestId:Number,name:String,login:String,email:String,date:Number},computed:{breadcrumbs(){return[{label:this.$t("title.UserAccounts"),route:"ManageUsers"},{label:this.$t("title.RegistrationRequests"),route:"RegistrationRequests"}]},formattedDate(){return this.$formatter.formatStamp(this.date)}},methods:{approveRequest(){this.$router.push("ApproveRequest",{requestId:this.requestId})},rejectRequest(){this.$router.push("RejectRequest",{requestId:this.requestId})}}},i=s(84),a=Object(i.a)(r,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.name,breadcrumbs:t.breadcrumbs,"auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.approveRequest}},[e("span",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Approve")))]),t._v(" "),e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.rejectRequest}},[e("span",{staticClass:"fa fa-ban",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Reject")))])]},proxy:!0}])},[t._v(" "),e("FormSection",{attrs:{title:t.$t("title.Details")}}),t._v(" "),e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"panel-body panel-table"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.Login")))]),t._v(" "),e("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.login))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.EmailAddress")))]),t._v(" "),e("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.email))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.CreatedDate")))]),t._v(" "),e("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.formattedDate))])])])])],1)}),[],!1,null,null,null);e.default=a.exports},145:function(t,e,s){"use strict";s.r(e);var r=s(85),i=(s(87),{props:{userId:Number,name:String,email:String,accountMode:Boolean},data(){return{hasEmail:null!=this.email}},computed:{isOwn(){return this.userId==this.$store.state.global.userId}},methods:{submit(){if(!this.hasEmail)return void this.returnToDetails();const t={};this.isOwn||(t.userId=this.userId),this.$form.block(),this.$ajax.post(this.isOwn?"/account/password/reset.php":"/users/password/reset.php",t).then(()=>{this.returnToDetails()}).catch(t=>{t.reason==r.n.APIError&&t.errorCode==r.g.UnknownUser?(this.$form.unblock(),this.hasEmail=!1):this.$form.error(t)})},returnToDetails(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})}}}),a=s(84),o=Object(a.a)(i,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.$t("cmd.ResetPassword"),size:"small","with-buttons":"","cancel-hidden":!t.hasEmail},on:{ok:t.submit,cancel:t.returnToDetails}},[t.hasEmail?t.isOwn?e("Prompt",{attrs:{path:"prompt.ResetOwnPassword"}}):e("Prompt",{attrs:{path:"prompt.ResetPassword"}},[e("strong",[t._v(t._s(t.name))])]):e("Prompt",{attrs:{"alert-class":"alert-danger",path:"error.ResetPasswordNoEmail"}})],1)}),[],!1,null,null,null);e.default=o.exports},146:function(t,e,s){"use strict";s.r(e);var r=s(86),i=s(85);function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={props:{userId:Number,name:String,login:String,email:String,language:String,access:Number,userProjects:Array,accountMode:Boolean},computed:o(o(o({},Object(r.c)("global",["projects","settings","languages"])),Object(r.b)("global",["isAdministrator"])),{},{breadcrumbs(){return this.accountMode?null:[{label:this.$t("title.UserAccounts"),route:"ManageUsers"}]},languageName(){if(null==this.language)return this.$t("text.DefaultLanguage");{const t=this.languages.find(t=>t.key==this.language);if(null!=t)return t.name}},globalAccess(){return this.access==i.a.NoAccess?this.$t("text.Disabled"):this.access==i.a.NormalAccess?this.$t("text.RegularUser"):this.access==i.a.AdministratorAccess?this.$t("text.SystemAdministrator"):void 0},sortedProjects(){return this.projects.map(t=>this.userProjects.find(e=>e.id==t.id)).filter(t=>null!=t)},columns(){return{name:{title:this.$t("title.Name"),class:"column-large"},access:{title:this.$t("title.Access")}}},isCurrentUser(){return this.userId==this.$store.state.global.userId},canResetPassword(){return this.$store.state.global.settings.resetPassword}}),methods:{getName(t){const e=this.projects.find(e=>e.id==t.id);if(null!=e)return e.name},getAccess(t){return t.access==i.a.NormalAccess?this.$t("text.RegularMember"):t.access==i.a.AdministratorAccess?this.$t("text.ProjectAdministrator"):void 0},editUser(){this.$router.push(this.accountMode?"EditAccount":"EditUser",{userId:this.userId})},editAccess(){this.$router.push("EditUserAccess",{userId:this.userId})},changePassword(){this.$router.push(this.accountMode?"ChangeAccountPassword":"ChangePassword",{userId:this.userId})},resetPassword(){this.$router.push(this.accountMode?"ResetAccountPassword":"ResetPassword",{userId:this.userId})},addProjects(){this.$router.push(this.accountMode?"AddAccountProjects":"AddUserProjects",{userId:this.userId})},rowClick(t){this.$router.push(this.accountMode?"EditAccountProject":"EditUserProject",{userId:this.userId,projectId:this.sortedProjects[t].id})}}},l=s(84),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("BaseForm",{attrs:{title:t.name,breadcrumbs:t.breadcrumbs,"auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[t.canResetPassword?e("DropdownButton",{attrs:{"fa-class":"fa-ellipsis-v","menu-class":"dropdown-menu-right",title:t.$t("title.More")}},[e("li",[e("HyperLink",{on:{click:t.changePassword}},[e("span",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ChangePassword")))])],1),t._v(" "),e("li",[e("HyperLink",{on:{click:t.resetPassword}},[e("span",{staticClass:"fa fa-unlock-alt",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ResetPassword")))])],1)]):e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.changePassword}},[e("span",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ChangePassword")))])]},proxy:!0}])},[t._v(" "),e("FormSection",{attrs:{title:t.$t("title.Account")}},[e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.editUser}},[e("span",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Edit")))])]),t._v(" "),e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"panel-body panel-table"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.Login")))]),t._v(" "),e("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.login))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.EmailAddress")))]),t._v(" "),e("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.email))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.Language")))]),t._v(" "),e("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.languageName))])])])]),t._v(" "),e("FormSection",{attrs:{title:t.$t("title.GlobalAccess")}},[t.isCurrentUser?t._e():e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.editAccess}},[e("span",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Edit"))+"\n    ")])]),t._v(" "),e("div",{staticClass:"alert alert-default"},[t._v("\n    "+t._s(t.globalAccess)+"\n  ")]),t._v(" "),e("FormSection",{attrs:{title:t.$t("title.Projects")}},[t.isAdministrator?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addProjects}},[e("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add"))+"\n    ")]):t._e()]),t._v(" "),t.sortedProjects.length>0?e("Grid",{attrs:{items:t.sortedProjects,columns:t.columns,"row-click-disabled":!t.isAdministrator},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"name-cell",fn:function(e){let{item:s}=e;return[t._v("\n      "+t._s(t.getName(s))+"\n    ")]}},{key:"access-cell",fn:function(e){let{item:s}=e;return[t._v("\n      "+t._s(t.getAccess(s))+"\n    ")]}}],null,!1,2577659337)}):e("div",{staticClass:"alert alert-info"},[t._v("\n    "+t._s(t.isCurrentUser?t.$t("info.NoOwnProjects"):t.$t("info.NoUserProjects"))+"\n  ")])],1)}),[],!1,null,null,null);e.default=u.exports}}]);