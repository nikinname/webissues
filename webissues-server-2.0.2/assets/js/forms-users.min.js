/*!
 * WebIssues v2.0.2
 * Copyright (C) 2007-2020 WebIssues Team
 * License: Affero GPL v3.0
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{382:function(t,e,s){"use strict";s.r(e);var r=s(349),a=s(348);function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={props:{userId:Number,name:String,login:String,email:String,language:String,access:Number,userProjects:Array,accountMode:Boolean},computed:i(i(i({},Object(r.c)("global",["projects","settings","languages"])),Object(r.b)("global",["isAdministrator"])),{},{breadcrumbs:function(){return this.accountMode?null:[{label:this.$t("title.UserAccounts"),route:"ManageUsers"}]},languageName:function(){var t=this;if(null==this.language)return this.$t("text.DefaultLanguage");var e=this.languages.find((function(e){return e.key==t.language}));return null!=e?e.name:void 0},globalAccess:function(){return this.access==a.a.NoAccess?this.$t("text.Disabled"):this.access==a.a.NormalAccess?this.$t("text.RegularUser"):this.access==a.a.AdministratorAccess?this.$t("text.SystemAdministrator"):void 0},sortedProjects:function(){var t=this;return this.projects.map((function(e){return t.userProjects.find((function(t){return t.id==e.id}))})).filter((function(t){return null!=t}))},columns:function(){return{name:{title:this.$t("title.Name"),class:"column-large"},access:{title:this.$t("title.Access")}}},isCurrentUser:function(){return this.userId==this.$store.state.global.userId},canResetPassword:function(){return this.$store.state.global.settings.resetPassword}}),methods:{getName:function(t){var e=this.projects.find((function(e){return e.id==t.id}));if(null!=e)return e.name},getAccess:function(t){return t.access==a.a.NormalAccess?this.$t("text.RegularMember"):t.access==a.a.AdministratorAccess?this.$t("text.ProjectAdministrator"):void 0},editUser:function(){this.$router.push(this.accountMode?"EditAccount":"EditUser",{userId:this.userId})},editAccess:function(){this.$router.push("EditUserAccess",{userId:this.userId})},changePassword:function(){this.$router.push(this.accountMode?"ChangeAccountPassword":"ChangePassword",{userId:this.userId})},resetPassword:function(){this.$router.push(this.accountMode?"ResetAccountPassword":"ResetPassword",{userId:this.userId})},addProjects:function(){this.$router.push(this.accountMode?"AddAccountProjects":"AddUserProjects",{userId:this.userId})},rowClick:function(t){this.$router.push(this.accountMode?"EditAccountProject":"EditUserProject",{userId:this.userId,projectId:this.sortedProjects[t].id})}}},l=s(347),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.name,breadcrumbs:t.breadcrumbs,"auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[t.canResetPassword?s("DropdownButton",{attrs:{"fa-class":"fa-ellipsis-v","menu-class":"dropdown-menu-right",title:t.$t("title.More")}},[s("li",[s("HyperLink",{on:{click:t.changePassword}},[s("span",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ChangePassword")))])],1),t._v(" "),s("li",[s("HyperLink",{on:{click:t.resetPassword}},[s("span",{staticClass:"fa fa-unlock-alt",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ResetPassword")))])],1)]):s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.changePassword}},[s("span",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.ChangePassword")))])]},proxy:!0}])},[t._v(" "),s("FormSection",{attrs:{title:t.$t("title.Account")}},[s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.editUser}},[s("span",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Edit")))])]),t._v(" "),s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-body panel-table"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.Login")))]),t._v(" "),s("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.login))])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.EmailAddress")))]),t._v(" "),s("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.email))])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.Language")))]),t._v(" "),s("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.languageName))])])])]),t._v(" "),s("FormSection",{attrs:{title:t.$t("title.GlobalAccess")}},[t.isCurrentUser?t._e():s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.editAccess}},[s("span",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Edit"))+"\n    ")])]),t._v(" "),s("div",{staticClass:"alert alert-default"},[t._v("\n    "+t._s(t.globalAccess)+"\n  ")]),t._v(" "),s("FormSection",{attrs:{title:t.$t("title.Projects")}},[t.isAdministrator?s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addProjects}},[s("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add"))+"\n    ")]):t._e()]),t._v(" "),t.sortedProjects.length>0?s("Grid",{attrs:{items:t.sortedProjects,columns:t.columns,"row-click-disabled":!t.isAdministrator},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"name-cell",fn:function(e){var s=e.item;return[t._v("\n      "+t._s(t.getName(s))+"\n    ")]}},{key:"access-cell",fn:function(e){var s=e.item;return[t._v("\n      "+t._s(t.getAccess(s))+"\n    ")]}}],null,!1,2577659337)}):s("div",{staticClass:"alert alert-info"},[t._v("\n    "+t._s(t.isCurrentUser?t.$t("info.NoOwnProjects"):t.$t("info.NoUserProjects"))+"\n  ")])],1)}),[],!1,null,null,null);e.default=u.exports},383:function(t,e,s){"use strict";s.r(e);var r=s(348),a=(s(350),{props:{userId:Number,name:String,email:String,accountMode:Boolean},data:function(){return{hasEmail:null!=this.email}},computed:{isOwn:function(){return this.userId==this.$store.state.global.userId}},methods:{submit:function(){var t=this;if(this.hasEmail){var e={};this.isOwn||(e.userId=this.userId),this.$form.block(),this.$ajax.post(this.isOwn?"/account/password/reset.php":"/users/password/reset.php",e).then((function(){t.returnToDetails()})).catch((function(e){e.reason==r.m.APIError&&e.errorCode==r.f.UnknownUser?(t.$form.unblock(),t.hasEmail=!1):t.$form.error(e)}))}else this.returnToDetails()},returnToDetails:function(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})}}}),o=s(347),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("cmd.ResetPassword"),size:"small","with-buttons":"","cancel-hidden":!t.hasEmail},on:{ok:t.submit,cancel:t.returnToDetails}},[t.hasEmail?t.isOwn?s("Prompt",{attrs:{path:"prompt.ResetOwnPassword"}}):s("Prompt",{attrs:{path:"prompt.ResetPassword"}},[s("strong",[t._v(t._s(t.name))])]):s("Prompt",{attrs:{"alert-class":"alert-danger",path:"error.ResetPasswordNoEmail"}})],1)}),[],!1,null,null,null);e.default=i.exports},385:function(t,e,s){"use strict";s.r(e);var r={props:{requestId:Number,name:String,login:String,email:String,date:Number},computed:{breadcrumbs:function(){return[{label:this.$t("title.UserAccounts"),route:"ManageUsers"},{label:this.$t("title.RegistrationRequests"),route:"RegistrationRequests"}]},formattedDate:function(){return this.$formatter.formatStamp(this.date)}},methods:{approveRequest:function(){this.$router.push("ApproveRequest",{requestId:this.requestId})},rejectRequest:function(){this.$router.push("RejectRequest",{requestId:this.requestId})}}},a=s(347),o=Object(a.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.name,breadcrumbs:t.breadcrumbs,"auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.approveRequest}},[s("span",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Approve")))]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.rejectRequest}},[s("span",{staticClass:"fa fa-ban",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Reject")))])]},proxy:!0}])},[t._v(" "),s("FormSection",{attrs:{title:t.$t("title.Details")}}),t._v(" "),s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-body panel-table"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.Login")))]),t._v(" "),s("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.login))])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.EmailAddress")))]),t._v(" "),s("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.email))])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4 col-sm-3"},[t._v(t._s(t.$t("label.CreatedDate")))]),t._v(" "),s("div",{staticClass:"col-xs-8 col-sm-9"},[t._v(t._s(t.formattedDate))])])])])],1)}),[],!1,null,null,null);e.default=o.exports},386:function(t,e,s){"use strict";s.r(e);var r=s(348),a={props:{userId:Number,projectId:Number,userName:String,projectName:String,accountMode:Boolean},methods:{submit:function(){var t=this;this.$form.block(),this.$ajax.post("/users/projects/edit.php",{userId:this.userId,projects:[this.projectId],access:r.a.NoAccess}).then((function(e){e.changed&&t.$store.commit("global/setDirty"),t.returnToDetails()})).catch((function(e){t.$form.error(e)}))},returnToDetails:function(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})}}},o=s(347),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("cmd.RemoveProject"),size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[s("Prompt",{attrs:{path:"prompt.RemoveMember"}},[s("strong",[t._v(t._s(t.userName))]),s("strong",[t._v(t._s(t.projectName))])])],1)}),[],!1,null,null,null);e.default=i.exports},387:function(t,e,s){"use strict";s.r(e);var r={props:{requestId:Number,name:String},methods:{submit:function(){var t=this;this.$form.block();var e={requestId:this.requestId};this.$ajax.post("/users/requests/reject.php",e).then((function(){t.$router.push("RegistrationRequests")})).catch((function(e){t.$form.error(e)}))},returnToDetails:function(){this.$router.push("RequestDetails",{requestId:this.requestId})}}},a=s(347),o=Object(a.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("BaseForm",{attrs:{title:this.$t("cmd.RejectRequest"),size:"small","with-buttons":""},on:{ok:this.submit,cancel:this.returnToDetails}},[e("Prompt",{attrs:{path:"prompt.RejectRequest"}},[e("strong",[this._v(this._s(this.name))])])],1)}),[],!1,null,null,null);e.default=o.exports},388:function(t,e,s){"use strict";s.r(e);var r={props:{requests:Array},computed:{breadcrumbs:function(){return[{label:this.$t("title.UserAccounts"),route:"ManageUsers"}]},size:function(){return this.requests.length>0?"large":"normal"},columns:function(){return{name:{title:this.$t("title.Name"),class:"column-medium"},login:{title:this.$t("title.Login"),class:"column-medium"},email:{title:this.$t("title.Email"),class:"column-medium"},date:{title:this.$t("title.CreatedDate")}}}},methods:{rowClick:function(t){this.$router.push("RequestDetails",{requestId:this.requests[t].id})}}},a=s(347),o=Object(a.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("title.RegistrationRequests"),breadcrumbs:t.breadcrumbs,size:t.size,"auto-close":"","save-position":""}},[t.requests.length>0?s("Grid",{attrs:{items:t.requests,columns:t.columns},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"date-cell",fn:function(e){var s=e.item;return[t._v("\n      "+t._s(t.$formatter.formatStamp(s.date))+"\n    ")]}}],null,!1,407176963)}):s("Prompt",{attrs:{path:"info.NoRegistrationRequests"}})],1)}),[],!1,null,null,null);e.default=o.exports},390:function(t,e,s){"use strict";s.r(e);var r=s(348),a={props:{users:Array},computed:{columns:function(){return{name:{title:this.$t("title.Name"),class:"column-medium"},login:{title:this.$t("title.Login"),class:"column-medium"},email:{title:this.$t("title.Email"),class:"column-medium"},access:{title:this.$t("title.Access")}}},hasRegistrationRequests:function(){return this.$store.state.global.settings.selfRegister&&!this.$store.state.global.settings.registerAutoApprove}},methods:{getAccess:function(t){return t.access==r.a.NoAccess?this.$t("text.Disabled"):t.access==r.a.NormalAccess?t.projectAdmin?this.$t("text.ProjectAdministrator"):this.$t("text.RegularUser"):t.access==r.a.AdministratorAccess?this.$t("text.SystemAdministrator"):void 0},addUser:function(){this.$router.push("AddUser")},registrationRequests:function(){this.$router.push("RegistrationRequests")},rowClick:function(t){this.$router.push("UserDetails",{userId:this.users[t].id})}}},o=s(347),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("title.UserAccounts"),size:"large","auto-close":"","save-position":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addUser}},[s("span",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Add")))]),t._v(" "),t.hasRegistrationRequests?s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.registrationRequests}},[s("span",{staticClass:"fa fa-user-plus",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("title.RegistrationRequests"))+"\n    ")]):t._e()]},proxy:!0}])},[t._v(" "),s("Grid",{attrs:{items:t.users,columns:t.columns},on:{"row-click":t.rowClick},scopedSlots:t._u([{key:"access-cell",fn:function(e){var s=e.item;return[t._v("\n      "+t._s(t.getAccess(s))+"\n    ")]}}])})],1)}),[],!1,null,null,null);e.default=i.exports},391:function(t,e,s){"use strict";s.r(e);var r=s(349),a=s(348);function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={props:{mode:String,userId:Number,projectId:Number,userName:String,projectName:String,initialAccess:Number,userProjects:Array,accountMode:Boolean},fields:function(){return{access:{value:this.initialAccess,type:Number}}},data:function(){return{normalAccess:a.a.NormalAccess,administratorAccess:a.a.AdministratorAccess,selectedProjects:[]}},computed:i(i({},Object(r.c)("global",["projects"])),{},{title:function(){return"edit"==this.mode?this.$t("cmd.EditAccess"):"add"==this.mode?this.$t("cmd.AddProjects"):void 0},size:function(){return"edit"==this.mode?"small":"add"==this.mode?"normal":void 0},availableProjects:function(){var t=this;return null!=this.userProjects?this.projects.filter((function(e){return t.userProjects.every((function(t){return t.id!=e.id}))})):[]}}),methods:{removeProject:function(){this.$router.push(this.accountMode?"RemoveAccountProject":"RemoveUserProject",{userId:this.userId,projectId:this.projectId})},selectAll:function(t){this.selectedProjects=this.availableProjects.map((function(e){return t}))},submit:function(){var t=this;if(this.$fields.validate())if("edit"!=this.mode||this.$fields.modified()){var e={userId:this.userId};if("edit"==this.mode)e.projects=[this.projectId];else for(var s in e.projects=[],this.selectedProjects)this.selectedProjects[s]&&e.projects.push(this.availableProjects[s].id);e.access=this.access,0!=e.projects.length?(this.$form.block(),this.$ajax.post("/users/projects/edit.php",e).then((function(e){e.changed&&t.$store.commit("global/setDirty"),t.returnToDetails()})).catch((function(e){t.$form.error(e)}))):this.returnToDetails()}else this.returnToDetails()},returnToDetails:function(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})}}},l=s(347),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.title,size:t.size,"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails},scopedSlots:t._u([{key:"header",fn:function(){return["edit"==t.mode?s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.removeProject}},[s("span",{staticClass:"fa fa-ban",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("cmd.Remove"))+"\n    ")]):t._e()]},proxy:!0}])},[t._v(" "),"edit"==t.mode?s("Prompt",{attrs:{path:"prompt.EditMember"}},[s("strong",[t._v(t._s(t.projectName))]),s("strong",[t._v(t._s(t.userName))])]):"add"==t.mode?s("Prompt",{attrs:{path:"prompt.AddUserProjects"}},[s("strong",[t._v(t._s(t.userName))])]):t._e(),t._v(" "),"add"==t.mode&&t.availableProjects.length>0?s("Panel",{attrs:{title:t.$t("title.Projects")},scopedSlots:t._u([{key:"heading",fn:function(){return[s("div",{staticClass:"panel-links"},[s("HyperLink",{on:{click:function(e){return t.selectAll(!0)}}},[t._v(t._s(t.$t("cmd.SelectAll")))]),t._v(" "),s("HyperLink",{on:{click:function(e){return t.selectAll(!1)}}},[t._v(t._s(t.$t("cmd.UnselectAll")))])],1)]},proxy:!0}],null,!1,1824297498)},[t._v(" "),s("div",{staticClass:"row checkbox-group"},t._l(t.availableProjects,(function(e,r){return s("div",{key:e.id,staticClass:"col-xs-12 col-md-4"},[s("div",{staticClass:"checkbox"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProjects[r],expression:"selectedProjects[ index ]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedProjects[r])?t._i(t.selectedProjects[r],null)>-1:t.selectedProjects[r]},on:{change:function(e){var s=t.selectedProjects[r],a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.selectedProjects,r,s.concat([null])):i>-1&&t.$set(t.selectedProjects,r,s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.selectedProjects,r,o)}}}),t._v(" "+t._s(e.name))])])])})),0)]):"add"==t.mode?s("Prompt",{attrs:{path:"info.NoAvailableProjects","alert-class":"alert-warning"}}):t._e(),t._v(" "),s("FormGroup",{attrs:{label:t.$t("title.Access"),required:""}},[s("div",{staticClass:"radio"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.normalAccess,checked:t._q(t.access,t.normalAccess)},on:{change:function(e){t.access=t.normalAccess}}}),t._v(" "+t._s(t.$t("text.RegularMember")))])]),t._v(" "),s("div",{staticClass:"radio"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.administratorAccess,checked:t._q(t.access,t.administratorAccess)},on:{change:function(e){t.access=t.administratorAccess}}}),t._v(" "+t._s(t.$t("text.ProjectAdministrator")))])])])],1)}),[],!1,null,null,null);e.default=u.exports},392:function(t,e,s){"use strict";s.r(e);var r=s(348),a={props:{userId:Number,name:String,initialAccess:Number},fields:function(){return{access:{value:this.initialAccess,type:Number}}},data:function(){return{noAccess:r.a.NoAccess,normalAccess:r.a.NormalAccess,administratorAccess:r.a.AdministratorAccess}},methods:{submit:function(){var t=this;if(this.$fields.validate())if(this.$fields.modified()){var e={userId:this.userId,access:this.access};this.$form.block(),this.$ajax.post("/users/access.php",e).then((function(e){e.changed&&t.$store.commit("global/setDirty"),t.returnToDetails()})).catch((function(e){t.$form.error(e)}))}else this.returnToDetails()},returnToDetails:function(){this.$router.push("UserDetails",{userId:this.userId})}}},o=s(347),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("title.GlobalAccess"),size:"small","with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[s("Prompt",{attrs:{path:"prompt.EditUserAccess"}},[s("strong",[t._v(t._s(t.name))])]),t._v(" "),s("FormGroup",{attrs:{label:t.$t("label.Access"),required:""}},[s("div",{staticClass:"radio"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.noAccess,checked:t._q(t.access,t.noAccess)},on:{change:function(e){t.access=t.noAccess}}}),t._v(" "+t._s(t.$t("text.Disabled")))])]),t._v(" "),s("div",{staticClass:"radio"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.normalAccess,checked:t._q(t.access,t.normalAccess)},on:{change:function(e){t.access=t.normalAccess}}}),t._v(" "+t._s(t.$t("text.RegularUser")))])]),t._v(" "),s("div",{staticClass:"radio"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.access,expression:"access"}],attrs:{type:"radio"},domProps:{value:t.administratorAccess,checked:t._q(t.access,t.administratorAccess)},on:{change:function(e){t.access=t.administratorAccess}}}),t._v(" "+t._s(t.$t("text.SystemAdministrator")))])])])],1)}),[],!1,null,null,null);e.default=i.exports},393:function(t,e,s){"use strict";s.r(e);var r=s(349),a=s(348),o=s(350);function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l={props:{mode:String,userId:Number,initialName:String,initialLogin:String,initialEmail:String,initialLanguage:String},fields:function(){var t=this,e=this.$store.state.global.userAccess==a.a.AdministratorAccess;return{name:{value:this.initialName,type:String,required:!0,maxLength:a.l.Name,condition:e},login:{value:this.initialLogin,type:String,required:!0,maxLength:a.l.Login,condition:e},sendInvitationEmail:{type:Boolean},password:{type:String,required:!0,maxLength:a.l.Password,condition:function(){return"add"==t.mode&&!t.sendInvitationEmail}},confirmPassword:{type:String,required:!0,maxLength:a.l.Password,parse:this.comparePassword,condition:function(){return"add"==t.mode&&!t.sendInvitationEmail}},mustChangePassword:{type:Boolean},email:{value:this.initialEmail,type:String,required:!1,maxLength:a.l.Value,parse:this.checkEmailAddress},language:{value:this.initialLanguage,type:String,required:!1}}},computed:n(n(n({},Object(r.c)("global",["languages"])),Object(r.b)("global",["isAdministrator"])),{},{title:function(){return"edit"==this.mode?this.$t("cmd.EditUser"):"account"==this.mode?this.$t("cmd.EditAccount"):"add"==this.mode?this.$t("cmd.AddUser"):void 0},canResetPassword:function(){return this.$store.state.global.settings.resetPassword},languageItems:function(){return this.languages.map((function(t){return t.key}))},languageNames:function(){return this.languages.map((function(t){return t.name}))}}),methods:{submit:function(){var t=this;if(this.$fields.validate())if("edit"!=this.mode&&"account"!=this.mode||this.$fields.modified()){var e,s={};("edit"==this.mode||"account"==this.mode&&this.isAdministrator)&&(s.userId=this.userId),this.isAdministrator&&(s.name=this.name,s.login=this.login),this.sendInvitationEmail?s.sendInvitationEmail=!0:"add"==this.mode&&(s.password=this.password,s.mustChangePassword=this.mustChangePassword),s.email=this.email,s.language=this.language,this.$form.block(),e="account"==this.mode?this.isAdministrator?"/users/edit.php":"/account/edit.php":"/users/"+this.mode+".php",this.$ajax.post(e,s).then((function(e){var s=e.userId,r=e.changed;if(r&&t.$store.commit("global/setDirty"),r&&s==t.$store.state.global.userId){var a=""!=t.language?t.language:t.$store.state.global.settings.defaultLanguage;t.$i18n.setLocale(a).then((function(){t.returnToDetails(s)}))}else t.returnToDetails(s)})).catch((function(e){e.reason==a.m.APIError&&e.errorCode==a.f.UserAlreadyExists?(t.$form.unblock(),t.nameError=t.$t("ErrorCode."+e.errorCode),t.$nextTick((function(){t.$refs.name.focus()}))):e.reason==a.m.APIError&&e.errorCode==a.f.LoginAlreadyExists?(t.$form.unblock(),t.loginError=t.$t("ErrorCode."+e.errorCode),t.$nextTick((function(){t.$refs.login.focus()}))):e.reason==a.m.APIError&&e.errorCode==a.f.EmailAlreadyExists?(t.$form.unblock(),t.emailError=t.$t("ErrorCode."+e.errorCode),t.$nextTick((function(){t.$refs.email.focus()}))):t.$form.error(e)}))}else this.returnToDetails(this.userId)},cancel:function(){"edit"==this.mode||"account"==this.mode?this.returnToDetails(this.userId):this.$router.push("ManageUsers")},returnToDetails:function(t){"account"==this.mode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:t})},comparePassword:function(t){if(""!=this.password&&this.password!=t)throw Object(o.c)(this.$t("ErrorCode."+a.f.PasswordNotMatching));return t},checkEmailAddress:function(t){if(""!=t)this.$parser.checkEmailAddress(t);else if(this.sendInvitationEmail)throw Object(o.c)(this.$t("error.NoEmailForInvitation"));return t}},mounted:function(){this.isAdministrator?this.$refs.name.focus():this.$refs.email.focus()}},u=s(347),d=Object(u.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.title,"with-buttons":""},on:{ok:t.submit,cancel:t.cancel}},["edit"==t.mode?s("Prompt",{attrs:{path:"prompt.EditUser"}},[s("strong",[t._v(t._s(t.initialName))])]):"account"==t.mode?s("Prompt",{attrs:{path:"prompt.EditAccount"}}):"add"==t.mode?s("Prompt",{attrs:{path:"prompt.AddUser"}}):t._e(),t._v(" "),t.isAdministrator?s("FormInput",t._b({ref:"name",attrs:{id:"name",label:t.$t("label.Name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"FormInput",t.$field("name"),!1)):t._e(),t._v(" "),t.isAdministrator?s("FormInput",t._b({ref:"login",attrs:{id:"login",label:t.$t("label.Login")},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}},"FormInput",t.$field("login"),!1)):t._e(),t._v(" "),"add"==t.mode&&t.canResetPassword?s("FormCheckbox",{attrs:{label:t.$t("text.SendInvitationEmail")},model:{value:t.sendInvitationEmail,callback:function(e){t.sendInvitationEmail=e},expression:"sendInvitationEmail"}}):t._e(),t._v(" "),"add"==t.mode?s("FormInput",t._b({ref:"password",attrs:{id:"password",type:"password",label:t.$t("label.Password"),disabled:t.sendInvitationEmail},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},"FormInput",t.$field("password"),!1)):t._e(),t._v(" "),"add"==t.mode?s("FormInput",t._b({ref:"confirmPassword",attrs:{id:"confirmPassword",type:"password",label:t.$t("label.ConfirmPassword"),disabled:t.sendInvitationEmail},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}},"FormInput",t.$field("confirmPassword"),!1)):t._e(),t._v(" "),"add"==t.mode?s("FormCheckbox",{attrs:{label:t.$t("text.UserMustChangePassword"),disabled:t.sendInvitationEmail},model:{value:t.mustChangePassword,callback:function(e){t.mustChangePassword=e},expression:"mustChangePassword"}}):t._e(),t._v(" "),s("FormInput",t._b({ref:"email",attrs:{id:"email",label:t.$t("label.EmailAddress")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},"FormInput",t.$field("email"),!1)),t._v(" "),s("FormDropdown",{attrs:{label:t.$t("label.Language"),items:t.languageItems,"item-names":t.languageNames,"default-name":t.$t("text.DefaultLanguage")},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}})],1)}),[],!1,null,null,null);e.default=d.exports},395:function(t,e,s){"use strict";s.r(e);var r=s(348),a=s(350),o={props:{userId:Number,name:String,accountMode:Boolean},fields:function(){return{password:{type:String,required:!0,maxLength:r.l.Password,condition:this.userId==this.$store.state.global.userId},newPassword:{type:String,required:!0,maxLength:r.l.Password},confirmPassword:{type:String,required:!0,maxLength:r.l.Password,parse:this.comparePassword},mustChangePassword:{type:Boolean}}},computed:{isOwn:function(){return this.userId==this.$store.state.global.userId}},methods:{submit:function(){var t=this;if(this.$fields.validate()){var e={};this.isOwn?(e.password=this.password,e.newPassword=this.newPassword):(e.userId=this.userId,e.password=this.newPassword,e.mustChangePassword=this.mustChangePassword),this.$form.block(),this.$ajax.post(this.isOwn?"/account/password/edit.php":"/users/password/edit.php",e).then((function(){t.returnToDetails()})).catch((function(e){e.reason==r.m.APIError&&e.errorCode==r.f.IncorrectLogin?(t.$form.unblock(),t.passwordError=t.$t("ErrorCode."+e.errorCode),t.$nextTick((function(){t.$refs.password.focus()}))):e.reason==r.m.APIError&&e.errorCode==r.f.CannotReusePassword?(t.$form.unblock(),t.newPasswordError=t.$t("ErrorCode."+e.errorCode),t.$nextTick((function(){t.$refs.newPassword.focus()}))):t.$form.error(e)}))}},returnToDetails:function(){this.accountMode?this.$router.push("MyAccount"):this.$router.push("UserDetails",{userId:this.userId})},comparePassword:function(t){if(""!=this.newPassword&&this.newPassword!=t)throw Object(a.c)(this.$t("ErrorCode."+r.f.PasswordNotMatching));return t}},mounted:function(){this.isOwn?this.$refs.password.focus():this.$refs.newPassword.focus()}},i=s(347),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("cmd.ChangePassword"),"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[t.isOwn?s("Prompt",{attrs:{path:"prompt.ChangeOwnPassword"}}):s("Prompt",{attrs:{path:"prompt.ChangePassword"}},[s("strong",[t._v(t._s(t.name))])]),t._v(" "),t.isOwn?s("FormInput",t._b({ref:"password",attrs:{id:"password",type:"password",label:t.$t("label.CurrentPassword")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},"FormInput",t.$field("password"),!1)):t._e(),t._v(" "),s("FormInput",t._b({ref:"newPassword",attrs:{id:"newPassword",type:"password",label:t.$t("label.NewPassword")},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}},"FormInput",t.$field("newPassword"),!1)),t._v(" "),s("FormInput",t._b({ref:"confirmPassword",attrs:{id:"confirmPassword",type:"password",label:t.$t("label.ConfirmPassword")},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}},"FormInput",t.$field("confirmPassword"),!1)),t._v(" "),t.isOwn?t._e():s("FormCheckbox",{attrs:{label:t.$t("text.UserMustChangePassword")},model:{value:t.mustChangePassword,callback:function(e){t.mustChangePassword=e},expression:"mustChangePassword"}})],1)}),[],!1,null,null,null);e.default=n.exports},396:function(t,e,s){"use strict";s.r(e);var r=s(349);function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i={props:{requestId:Number,name:String},data:function(){return{selectedProjects:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(r.c)("global",["projects"])),methods:{selectAll:function(t){this.selectedProjects=this.projects.map((function(e){return t}))},submit:function(){var t=this;this.$form.block();var e={requestId:this.requestId,projects:[]};for(var s in this.selectedProjects)this.selectedProjects[s]&&e.projects.push(this.projects[s].id);this.$ajax.post("/users/requests/approve.php",e).then((function(){t.$router.push("RegistrationRequests")})).catch((function(e){t.$form.error(e)}))},returnToDetails:function(){this.$router.push("RequestDetails",{requestId:this.requestId})}}},n=s(347),c=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseForm",{attrs:{title:t.$t("cmd.ApproveRequest"),"with-buttons":""},on:{ok:t.submit,cancel:t.returnToDetails}},[s("Prompt",{attrs:{path:"prompt.ApproveRequest"}},[s("strong",[t._v(t._s(t.name))])]),t._v(" "),t.projects.length>0?s("Panel",{attrs:{title:t.$t("title.Projects")},scopedSlots:t._u([{key:"heading",fn:function(){return[s("div",{staticClass:"panel-links"},[s("HyperLink",{on:{click:function(e){return t.selectAll(!0)}}},[t._v(t._s(t.$t("cmd.SelectAll")))]),t._v(" "),s("HyperLink",{on:{click:function(e){return t.selectAll(!1)}}},[t._v(t._s(t.$t("cmd.UnselectAll")))])],1)]},proxy:!0}],null,!1,1824297498)},[t._v(" "),s("div",{staticClass:"row checkbox-group"},t._l(t.projects,(function(e,r){return s("div",{key:e.id,staticClass:"col-xs-12 col-md-4"},[s("div",{staticClass:"checkbox"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProjects[r],expression:"selectedProjects[ index ]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedProjects[r])?t._i(t.selectedProjects[r],null)>-1:t.selectedProjects[r]},on:{change:function(e){var s=t.selectedProjects[r],a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.selectedProjects,r,s.concat([null])):i>-1&&t.$set(t.selectedProjects,r,s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.selectedProjects,r,o)}}}),t._v(" "+t._s(e.name))])])])})),0)]):s("Prompt",{attrs:{path:"info.NoAvailableProjects"}})],1)}),[],!1,null,null,null);e.default=c.exports}}]);